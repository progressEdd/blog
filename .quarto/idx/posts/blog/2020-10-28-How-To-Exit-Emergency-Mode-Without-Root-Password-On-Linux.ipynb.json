{"title":"How To Exit Emergency Mode Without Root Password On Linux","markdown":{"yaml":{"aliases":["/2020/10/28/How-To-Exit-Emergency-Mode-Without-Root-Password-On-Linux"],"date":"2020-10-28","description":"I recently had the pleasure of having my laptop reboot into emergency mode after I hard powered it off. The passwords I tried did not work nor could not remember my root password. Hopefully this guide will be helpful for me in the future or for any poor soul who is locked out of emergency mode.","output-file":"2020-10-28-how-to-exit-emergency-mode-without-root-password-on-linux.html","title":"How To Exit Emergency Mode Without Root Password On Linux","author":"progressEdd","categories":["Guide"]},"headingText":"How To Change The Root Password, When Root Password Is Unknown","containsRefs":false,"markdown":"\n\n\n\n<h1>Table of Contents<span class=\"tocSkip\"></span></h1>\n<div class=\"toc\"><ul class=\"toc-item\"><li><span><a href=\"#How-To-Exit-Emergency-Mode-Without-Root-Password-On-Linux\" data-toc-modified-id=\"How-To-Exit-Emergency-Mode-Without-Root-Password-On-Linux-1\"><span class=\"toc-item-num\">1&nbsp;&nbsp;</span>How To Exit Emergency Mode Without Root Password On Linux</a></span></li><li><span><a href=\"#How-To-Change-The-Root-Password,-When-Root-Password-Is-Unknown\" data-toc-modified-id=\"How-To-Change-The-Root-Password,-When-Root-Password-Is-Unknown-2\"><span class=\"toc-item-num\">2&nbsp;&nbsp;</span>How To Change The Root Password, When Root Password Is Unknown</a></span><ul class=\"toc-item\"><li><span><a href=\"#How-To-Change-Kernel-Parameters\" data-toc-modified-id=\"How-To-Change-Kernel-Parameters-2.1\"><span class=\"toc-item-num\">2.1&nbsp;&nbsp;</span>How To Change Kernel Parameters</a></span></li><li><span><a href=\"#How-To-Reset-The-Root-Password\" data-toc-modified-id=\"How-To-Reset-The-Root-Password-2.2\"><span class=\"toc-item-num\">2.2&nbsp;&nbsp;</span>How To Reset The Root Password</a></span></li></ul></li><li><span><a href=\"#passwd-root\" data-toc-modified-id=\"passwd-root-3\"><span class=\"toc-item-num\">3&nbsp;&nbsp;</span>passwd root</a></span></li><li><span><a href=\"#Fixing-Emergency-Mode-Error\" data-toc-modified-id=\"Fixing-Emergency-Mode-Error-4\"><span class=\"toc-item-num\">4&nbsp;&nbsp;</span>Fixing Emergency Mode Error</a></span></li><li><span><a href=\"#Explanation-Behind-All-Steps\" data-toc-modified-id=\"Explanation-Behind-All-Steps-5\"><span class=\"toc-item-num\">5&nbsp;&nbsp;</span>Explanation Behind All Steps</a></span><ul class=\"toc-item\"><li><span><a href=\"#Why-We-Change-Kernel-Parameters\" data-toc-modified-id=\"Why-We-Change-Kernel-Parameters-5.1\"><span class=\"toc-item-num\">5.1&nbsp;&nbsp;</span>Why We Change Kernel Parameters</a></span></li><li><span><a href=\"#Why-We-Unmount-And-Remount-The-Root-Partition-To-Reset-The-Root-Password\" data-toc-modified-id=\"Why-We-Unmount-And-Remount-The-Root-Partition-To-Reset-The-Root-Password-5.2\"><span class=\"toc-item-num\">5.2&nbsp;&nbsp;</span>Why We Unmount And Remount The Root Partition To Reset The Root Password</a></span></li><li><span><a href=\"#Why-We-Use-systemctl-Instead-of-journalctl\" data-toc-modified-id=\"Why-We-Use-systemctl-Instead-of-journalctl-5.3\"><span class=\"toc-item-num\">5.3&nbsp;&nbsp;</span>Why We Use <code>systemctl</code> Instead of <code>journalctl</code></a></span></li></ul></li></ul></div>\n\n\n## How To Change Kernel Parameters\nInstructions from \n[Milosz Galazka](https://blog.sleeplessbeastie.eu/2014/05/01/how-to-access-single-user-mode-without-password/)\n\n\n> In case the *Recovery mode*  menu entry is not available, you need to perform five simple steps in order to modify kernel parameters list.\n> \n>1. Turn on computer.\n>2. Access GRUB menu.\n>3. Edit existing menu entry (use  `e`  key).\n>4. Add  `single`  keyword (alternatively you can use  `-s`  or  `S` ) to the Linux kernel parameters list.\n>5. Press  `CTRL-X`  or  `F10`  while still in edit mode to continue boot process.\n\n## How To Reset The Root Password\nInstructions from \n[TecMint](https://blog.sleeplessbeastie.eu/2014/05/01/how-to-access-single-user-mode-without-password/)\n\n> Now check the status of root partition by running following command on the single user mode.\n>\n>```\n># mount | grep root\n>```\n>![Check Root Mount Status](https://www.tecmint.com/wp-content/uploads/2015/03/Check-Root-Mount-Status.png)\n>\n> You may notice that root partition is reported to be `'ro'` (Read Only). We need to have read-write permission on root partition to change the root password.\n> ```\n> # mount -o remount,rw /\n> ```\n> Also cross check, if the root partition is mounted with read-write permission mode.\n>\n> ```\n> # mount | grep root```\n> ![Set Permissions on Root Partition](https://www.tecmint.com/wp-content/uploads/2015/03/Set-Read-Write-Permission-on-Root-Partition.png)\n> Now you can change the root password by typing the passwd command. But that is not done. We need to relabel SELinux context. If we skip relabeling the whole SELinux context we would be able to login using using password.\n>\n> ```\n> # passwd root\n> [Enter New Password]\n> [Re-enter New Password]```\n>\n> ```# touch /.autorelabel```\n> ![Reset root Password](https://www.tecmint.com/wp-content/uploads/2015/03/Reset-root-Password.png)\n> Reboot and login again to root account and see if everything works ok or not?\n>\n> ```# exec /sbin/init```\n\n\n# Fixing Emergency Mode Error\nInstructions from\n[ Molesbite Hacks](https://www.youtube.com/watch?v=u42IpZU5ipQ)\n\n> Type `systemctl`\n>\n> You'll get a list of logs, scroll till you find the error highlighted in red.\n>\n> Type `fsck /dev/mapper/fedora-root`\n>\n> Hit Y (yes)\n\nWhen I initially ran `fsck /dev/mapper/fedora-root`, I got a error that wouldn't allow me to commit the changes\n\nI decided to run `systemctl` and look for the red error\n\nIn my case, the error was in `/dev/mapper/fedora-root`\n\nI modified the directory to be `/dev/mapper/fedora-home`, matching the one listed by `systemctl`\n\n# Explanation Behind All Steps\n\n## Why We Change Kernel Parameters\nWe changed the kernel parameters so that we avoid regular boot, as it would be stuck in emergency boot. \n\n## Why We Unmount And Remount The Root Partition To Reset The Root Password\nAs explained in the [TecMint article](https://blog.sleeplessbeastie.eu/2014/05/01/how-to-access-single-user-mode-without-password/), we unmount and remount (with `mount -o remount,rw /`) the root partition so that we have read-write access to modify the root's password.\n\n## Why We Use `systemctl` Instead of `journalctl`\n`journalctl` shows logs for everything including boots. If you have multiple boots, you may generate multiple logs. Using `systemctl` focuses on only the system processes, so the list is smaller to scrub through\n","srcMarkdownNoYaml":"\n\n\n\n<h1>Table of Contents<span class=\"tocSkip\"></span></h1>\n<div class=\"toc\"><ul class=\"toc-item\"><li><span><a href=\"#How-To-Exit-Emergency-Mode-Without-Root-Password-On-Linux\" data-toc-modified-id=\"How-To-Exit-Emergency-Mode-Without-Root-Password-On-Linux-1\"><span class=\"toc-item-num\">1&nbsp;&nbsp;</span>How To Exit Emergency Mode Without Root Password On Linux</a></span></li><li><span><a href=\"#How-To-Change-The-Root-Password,-When-Root-Password-Is-Unknown\" data-toc-modified-id=\"How-To-Change-The-Root-Password,-When-Root-Password-Is-Unknown-2\"><span class=\"toc-item-num\">2&nbsp;&nbsp;</span>How To Change The Root Password, When Root Password Is Unknown</a></span><ul class=\"toc-item\"><li><span><a href=\"#How-To-Change-Kernel-Parameters\" data-toc-modified-id=\"How-To-Change-Kernel-Parameters-2.1\"><span class=\"toc-item-num\">2.1&nbsp;&nbsp;</span>How To Change Kernel Parameters</a></span></li><li><span><a href=\"#How-To-Reset-The-Root-Password\" data-toc-modified-id=\"How-To-Reset-The-Root-Password-2.2\"><span class=\"toc-item-num\">2.2&nbsp;&nbsp;</span>How To Reset The Root Password</a></span></li></ul></li><li><span><a href=\"#passwd-root\" data-toc-modified-id=\"passwd-root-3\"><span class=\"toc-item-num\">3&nbsp;&nbsp;</span>passwd root</a></span></li><li><span><a href=\"#Fixing-Emergency-Mode-Error\" data-toc-modified-id=\"Fixing-Emergency-Mode-Error-4\"><span class=\"toc-item-num\">4&nbsp;&nbsp;</span>Fixing Emergency Mode Error</a></span></li><li><span><a href=\"#Explanation-Behind-All-Steps\" data-toc-modified-id=\"Explanation-Behind-All-Steps-5\"><span class=\"toc-item-num\">5&nbsp;&nbsp;</span>Explanation Behind All Steps</a></span><ul class=\"toc-item\"><li><span><a href=\"#Why-We-Change-Kernel-Parameters\" data-toc-modified-id=\"Why-We-Change-Kernel-Parameters-5.1\"><span class=\"toc-item-num\">5.1&nbsp;&nbsp;</span>Why We Change Kernel Parameters</a></span></li><li><span><a href=\"#Why-We-Unmount-And-Remount-The-Root-Partition-To-Reset-The-Root-Password\" data-toc-modified-id=\"Why-We-Unmount-And-Remount-The-Root-Partition-To-Reset-The-Root-Password-5.2\"><span class=\"toc-item-num\">5.2&nbsp;&nbsp;</span>Why We Unmount And Remount The Root Partition To Reset The Root Password</a></span></li><li><span><a href=\"#Why-We-Use-systemctl-Instead-of-journalctl\" data-toc-modified-id=\"Why-We-Use-systemctl-Instead-of-journalctl-5.3\"><span class=\"toc-item-num\">5.3&nbsp;&nbsp;</span>Why We Use <code>systemctl</code> Instead of <code>journalctl</code></a></span></li></ul></li></ul></div>\n\n# How To Change The Root Password, When Root Password Is Unknown\n\n## How To Change Kernel Parameters\nInstructions from \n[Milosz Galazka](https://blog.sleeplessbeastie.eu/2014/05/01/how-to-access-single-user-mode-without-password/)\n\n\n> In case the *Recovery mode*  menu entry is not available, you need to perform five simple steps in order to modify kernel parameters list.\n> \n>1. Turn on computer.\n>2. Access GRUB menu.\n>3. Edit existing menu entry (use  `e`  key).\n>4. Add  `single`  keyword (alternatively you can use  `-s`  or  `S` ) to the Linux kernel parameters list.\n>5. Press  `CTRL-X`  or  `F10`  while still in edit mode to continue boot process.\n\n## How To Reset The Root Password\nInstructions from \n[TecMint](https://blog.sleeplessbeastie.eu/2014/05/01/how-to-access-single-user-mode-without-password/)\n\n> Now check the status of root partition by running following command on the single user mode.\n>\n>```\n># mount | grep root\n>```\n>![Check Root Mount Status](https://www.tecmint.com/wp-content/uploads/2015/03/Check-Root-Mount-Status.png)\n>\n> You may notice that root partition is reported to be `'ro'` (Read Only). We need to have read-write permission on root partition to change the root password.\n> ```\n> # mount -o remount,rw /\n> ```\n> Also cross check, if the root partition is mounted with read-write permission mode.\n>\n> ```\n> # mount | grep root```\n> ![Set Permissions on Root Partition](https://www.tecmint.com/wp-content/uploads/2015/03/Set-Read-Write-Permission-on-Root-Partition.png)\n> Now you can change the root password by typing the passwd command. But that is not done. We need to relabel SELinux context. If we skip relabeling the whole SELinux context we would be able to login using using password.\n>\n> ```\n> # passwd root\n> [Enter New Password]\n> [Re-enter New Password]```\n>\n> ```# touch /.autorelabel```\n> ![Reset root Password](https://www.tecmint.com/wp-content/uploads/2015/03/Reset-root-Password.png)\n> Reboot and login again to root account and see if everything works ok or not?\n>\n> ```# exec /sbin/init```\n\n\n# Fixing Emergency Mode Error\nInstructions from\n[ Molesbite Hacks](https://www.youtube.com/watch?v=u42IpZU5ipQ)\n\n> Type `systemctl`\n>\n> You'll get a list of logs, scroll till you find the error highlighted in red.\n>\n> Type `fsck /dev/mapper/fedora-root`\n>\n> Hit Y (yes)\n\nWhen I initially ran `fsck /dev/mapper/fedora-root`, I got a error that wouldn't allow me to commit the changes\n\nI decided to run `systemctl` and look for the red error\n\nIn my case, the error was in `/dev/mapper/fedora-root`\n\nI modified the directory to be `/dev/mapper/fedora-home`, matching the one listed by `systemctl`\n\n# Explanation Behind All Steps\n\n## Why We Change Kernel Parameters\nWe changed the kernel parameters so that we avoid regular boot, as it would be stuck in emergency boot. \n\n## Why We Unmount And Remount The Root Partition To Reset The Root Password\nAs explained in the [TecMint article](https://blog.sleeplessbeastie.eu/2014/05/01/how-to-access-single-user-mode-without-password/), we unmount and remount (with `mount -o remount,rw /`) the root partition so that we have read-write access to modify the root's password.\n\n## Why We Use `systemctl` Instead of `journalctl`\n`journalctl` shows logs for everything including boots. If you have multiple boots, you may generate multiple logs. Using `systemctl` focuses on only the system processes, so the list is smaller to scrub through\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":true,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":false,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"jupyter"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../../styles.css"],"output-file":"2020-10-28-how-to-exit-emergency-mode-without-root-password-on-linux.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.6.42","theme":["cosmo","brand"],"title-block-banner":true,"aliases":["/2020/10/28/How-To-Exit-Emergency-Mode-Without-Root-Password-On-Linux"],"date":"2020-10-28","description":"I recently had the pleasure of having my laptop reboot into emergency mode after I hard powered it off. The passwords I tried did not work nor could not remember my root password. Hopefully this guide will be helpful for me in the future or for any poor soul who is locked out of emergency mode.","title":"How To Exit Emergency Mode Without Root Password On Linux","author":"progressEdd","categories":["Guide"]},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}