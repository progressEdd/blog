<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2020-12-02">
<meta name="description" content="Jake Tran made a video that covered a recent paper about how Hyperbaric Oxygen Therapy (HBOT), with the potential to reverse aging. I noticed that Jake didn’t go super in depth with the immune cells, I decided to fill the gap with my biology and anatomy knowledge I learned in university backed by some sources I found.">

<title>Explaining Immune Cells and Telomeres – What’s The Progress</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-29691c3a766d3ffdb963fe4326aa44ec.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">What’s The Progress</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../experiences.html"> 
<span class="menu-text">Experiences</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Explaining Immune Cells and Telomeres</h1>
                  <div>
        <div class="description">
          <a href="https://youtu.be/5Op_lx7rqSs">Jake Tran made a video that</a> covered a recent paper about how Hyperbaric Oxygen Therapy (HBOT), with the potential to reverse aging. I noticed that Jake didn’t go super in depth with the immune cells, I decided to fill the gap with my biology and anatomy knowledge I learned in university backed by some sources I found.
        </div>
      </div>
                </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">December 2, 2020</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<h1>
Table of Contents<span class="tocSkip"></span>
</h1>
<div class="toc">
<ul class="toc-item">
<li>
<span><a href="#Explaining-Immune-Cells-and-Telomeres" data-toc-modified-id="Explaining-Immune-Cells-and-Telomeres-1"><span class="toc-item-num">1&nbsp;&nbsp;</span>Explaining Immune Cells and Telomeres</a></span>
</li>
<li>
<span><a href="#Introduction" data-toc-modified-id="Introduction-2"><span class="toc-item-num">2&nbsp;&nbsp;</span>Introduction</a></span>
</li>
<li>
<span><a href="#Summary-of-The-Paper" data-toc-modified-id="Summary-of-The-Paper-3"><span class="toc-item-num">3&nbsp;&nbsp;</span>Summary of The Paper</a></span>
</li>
<li>
<span><a href="#What-Are-The-Functions-of-Immune-Cells" data-toc-modified-id="What-Are-The-Functions-of-Immune-Cells-4"><span class="toc-item-num">4&nbsp;&nbsp;</span>What Are The Functions of Immune Cells</a></span>
<ul class="toc-item">
<li>
<span><a href="#Explanation-of-Immune-Cells" data-toc-modified-id="Explanation-of-Immune-Cells-4.1"><span class="toc-item-num">4.1&nbsp;&nbsp;</span>Explanation of Immune Cells</a></span>
<ul class="toc-item">
<li>
<span><a href="#T-lympocytes-(T-cells-and-T-cytotoxic)" data-toc-modified-id="T-lympocytes-(T-cells-and-T-cytotoxic)-4.1.1"><span class="toc-item-num">4.1.1&nbsp;&nbsp;</span></a><a href="https://www.ncbi.nlm.nih.gov/books/NBK279396/#i2255.tlymphocytes" target="_blank">T lympocytes (T cells and T cytotoxic)</a></span>
</li>
<li>
<span><a href="#B-cells" data-toc-modified-id="B-cells-4.1.2"><span class="toc-item-num">4.1.2&nbsp;&nbsp;</span></a><a href="https://www.ncbi.nlm.nih.gov/books/NBK279396/#i2255.blymphocytes" target="_blank">B cells</a></span>
</li>
<li>
<span><a href="#Natural-Killer" data-toc-modified-id="Natural-Killer-4.1.3"><span class="toc-item-num">4.1.3&nbsp;&nbsp;</span></a><a href="https://www.ncbi.nlm.nih.gov/books/NBK279396/#i2255.protectionofferedbyt2" target="_blank">Natural Killer</a></span>
</li>
</ul>
</li>
</ul>
</li>
<li>
<span><a href="#Why-Telomeres-are-Important" data-toc-modified-id="Why-Telomeres-are-Important-5"><span class="toc-item-num">5&nbsp;&nbsp;</span>Why Telomeres are Important</a></span>
<ul class="toc-item">
<li>
<span><a href="#Explanation-of-Telomeres" data-toc-modified-id="Explanation-of-Telomeres-5.1"><span class="toc-item-num">5.1&nbsp;&nbsp;</span>Explanation of Telomeres</a></span>
<ul class="toc-item">
<li>
<span><a href="#A-Very-Short-Explanation-of-Telomeres" data-toc-modified-id="A-Very-Short-Explanation-of-Telomeres-5.1.1"><span class="toc-item-num">5.1.1&nbsp;&nbsp;</span>A Very Short Explanation of Telomeres</a></span>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>While browsing YouTube, I found a video by <a href="https://www.youtube.com/channel/UCoOjH8D2XAgjzQlneM2W0EQ">Jake Tran</a></p>
<div class="quarto-video ratio ratio-16x9"><iframe data-external="1" src="https://www.youtube.com/embed/5Op_lx7rqSs" title="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
<p>on Hyperbaric Oxygen Therapy (HBOT)which explained the findings of the following <a href="https://www.aging-us.com/article/202188/text">paper</a> published in <a href="https://www.aging-us.com/">Aging</a>.</p>
<p>I noticed that Jake didn’t go super in depth with the immune cells, so I decided to fill the gap with my biology and anatomy knowledge backed by some sources I found.</p>
</section>
<section id="summary-of-the-paper" class="level1">
<h1>Summary of The Paper</h1>
<p>On a small healthy population of thirty individuals with ages ranging from 60-70 year old, researchers found that hyperbaric oxygen therapy can increase telomere lengths in T helper, T cytotoxic, natural killer and B cells. To quote the results of the <a href="https://www.aging-us.com/article/202188/text">paper</a>, &gt; Telomeres length of T helper, T cytotoxic, natural killer and B cells increased significantly by over 20% following HBOT. The most significant change was noticed in B cells which increased at the 30th session, 60th session and post HBOT by 25.68%±40.42 (p=0.007), 29.39%±23.39 (p=0.0001) and 37.63%±52.73 (p=0.007), respectively.</p>
<p>I was originally excited by the results presented by the video and paper, but I vaguely remember being excited for <a href="https://www.nature.com/articles/s41467-020-19167-0">another promising headline</a> about the “anxiety brain” from <a href="https://youtu.be/_fVDyPdhj3U">sci-show</a>. I decided to follow the suggestion to use pubpeer to search the article <a href="https://www.callingbullshit.org/tools/tools_legit.html">from this guide</a>.</p>
<p>I found the following <a href="https://www.fightaging.org/archives/2020/11/overhyping-the-effects-of-hyperbaric-oxygen-treatment-on-aging/">post on Fight Aging</a>. It has a alternate explanation as to why HBOT do not directly help people become younger.</p>
<blockquote class="blockquote">
<p>It seems plausible that the same is true of cellular senescence in immune cells. Cells become senescent when they hit the Hayflick limit on cellular replication. Throughout much of life, the senescence of immune cells is likely more determined by replication pace (and thus immune challenges, the burden of infection) than by aging. And that is before we even get to the point that the authors of this paper used a less than standard measure of senescence, one for which it is possible to argue that it may or may not actually be representative of the burden of senescent cells in immune populations. Overall this data is all interesting, but I suspect that it tells us more about the poor relevance of the metrics chosen to anything other than the deeper aspects of immune function.</p>
</blockquote>
</section>
<section id="what-are-the-functions-of-immune-cells" class="level1">
<h1>What Are The Functions of Immune Cells</h1>
<section id="explanation-of-immune-cells" class="level2">
<h2 class="anchored" data-anchor-id="explanation-of-immune-cells">Explanation of Immune Cells</h2>
<p>I will be summarizing from the following ncbi textbook. For a more detailed explanation, feel free to check the following article. &gt; InformedHealth.org [Internet]. Cologne, Germany: Institute for Quality and Efficiency in Health Care (IQWiG); 2006-. The innate and adaptive immune systems. [Updated 2020 Jul 30]. Available from: https://www.ncbi.nlm.nih.gov/books/NBK279396/</p>
<section id="t-lympocytes-t-cells-and-t-cytotoxic" class="level3">
<h3 class="anchored" data-anchor-id="t-lympocytes-t-cells-and-t-cytotoxic"><a href="https://www.ncbi.nlm.nih.gov/books/NBK279396/#i2255.tlymphocytes">T lympocytes (T cells and T cytotoxic)</a></h3>
<p>The important properties of these cells is that 1. T cells detect abnormal or foreign cells 2. T cells use chemical messengers to start the immune system (T helper cells) 3. T cytotoxic cells destroy abnormal or foreign cells</p>
</section>
<section id="b-cells" class="level3">
<h3 class="anchored" data-anchor-id="b-cells"><a href="https://www.ncbi.nlm.nih.gov/books/NBK279396/#i2255.blymphocytes">B cells</a></h3>
<p>The important properties of these cells is that 1. B cells are activated by T helper cells 2. B cells help find other cells that are similar to the abnormal or foreign cells detected by T helper cells</p>
</section>
<section id="natural-killer" class="level3">
<h3 class="anchored" data-anchor-id="natural-killer"><a href="https://www.ncbi.nlm.nih.gov/books/NBK279396/#i2255.protectionofferedbyt2">Natural Killer</a></h3>
<p>The important properties of these cells is that 1. Natural killer cells find cells infected by a virus with surface detection to destroy the cell 2. Natural killer cells find tumor cells with surface detection to destroy the cell</p>
</section>
</section>
</section>
<section id="why-telomeres-are-important" class="level1">
<h1>Why Telomeres are Important</h1>
<section id="explanation-of-telomeres" class="level2">
<h2 class="anchored" data-anchor-id="explanation-of-telomeres">Explanation of Telomeres</h2>
<p>I will be pulling a lot of the explanations from the following articles This <a href="https://www.verywellhealth.com/understanding-cellular-aging-2224234">article from Verywell Health</a> talks about cellular aging. This <a href="https://www.healthline.com/health/telomeres">article from Healthline</a> talks about telomeres. ### A Very Short Explanation of Telomeres For cells to continue functioning properly, cells replicate to replace old cells. In this process DNA is copied and cut. To prevent important portions from being cut, telomeres are added to the end. As cells continue to replicate telomeres will continue to get shorter.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>