<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2020-07-02">
<meta name="description" content="One of my friends approached me asking if I had any experience animating graphs, since I had experience with video editing. Though I had not had any formal experience, I decided that it would be a interesting challenge to embark.">

<title>Using Matplotlib to Animate Data From a Velocity Recording – What’s The Progress</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-29691c3a766d3ffdb963fe4326aa44ec.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">What’s The Progress</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../experiences.html"> 
<span class="menu-text">Experiences</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Using Matplotlib to Animate Data From a Velocity Recording</h1>
                  <div>
        <div class="description">
          One of my friends approached me asking if I had any experience animating graphs, since I had experience with video editing. Though I had not had any formal experience, I decided that it would be a interesting challenge to embark.
        </div>
      </div>
                </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">July 2, 2020</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<h1>
Table of Contents<span class="tocSkip"></span>
</h1>
<div class="toc">
<ul class="toc-item">
<li>
<span><a href="#Using-Matplotlib-to-Animate-Data-From-a-Velocity-Recording" data-toc-modified-id="Using-Matplotlib-to-Animate-Data-From-a-Velocity-Recording-1"><span class="toc-item-num">1&nbsp;&nbsp;</span>Using Matplotlib to Animate Data From a Velocity Recording</a></span>
</li>
<li>
<span><a href="#Introduction" data-toc-modified-id="Introduction-2"><span class="toc-item-num">2&nbsp;&nbsp;</span>Introduction</a></span>
</li>
<li>
<span><a href="#Demonstration" data-toc-modified-id="Demonstration-3"><span class="toc-item-num">3&nbsp;&nbsp;</span>Demonstration</a></span>
<ul class="toc-item">
<li>
<span><a href="#Tracking-a-Line-Through-Time" data-toc-modified-id="Tracking-a-Line-Through-Time-3.1"><span class="toc-item-num">3.1&nbsp;&nbsp;</span>Tracking a Line Through Time</a></span>
</li>
<li>
<span><a href="#Plotting-a-Dot-and-Tracking-Across-Velocity-Curve" data-toc-modified-id="Plotting-a-Dot-and-Tracking-Across-Velocity-Curve-3.2"><span class="toc-item-num">3.2&nbsp;&nbsp;</span>Plotting a Dot and Tracking Across Velocity Curve</a></span>
</li>
<li>
<span><a href="#Generating-The-Gifs" data-toc-modified-id="Generating-The-Gifs-3.3"><span class="toc-item-num">3.3&nbsp;&nbsp;</span>Generating The Gifs</a></span>
</li>
</ul>
</li>
<li>
<span><a href="#Importing-Libraries-+-Loading-Data" data-toc-modified-id="Importing-Libraries-+-Loading-Data-4"><span class="toc-item-num">4&nbsp;&nbsp;</span>Importing Libraries + Loading Data</a></span>
</li>
<li>
<span><a href="#Plotting-Function" data-toc-modified-id="Plotting-Function-5"><span class="toc-item-num">5&nbsp;&nbsp;</span>Plotting Function</a></span>
<ul class="toc-item">
<li>
<span><a href="#Explanation-of-Inputs" data-toc-modified-id="Explanation-of-Inputs-5.1"><span class="toc-item-num">5.1&nbsp;&nbsp;</span>Explanation of Inputs</a></span>
</li>
<li>
<span><a href="#Explanation-of-Variables" data-toc-modified-id="Explanation-of-Variables-5.2"><span class="toc-item-num">5.2&nbsp;&nbsp;</span>Explanation of Variables</a></span>
<ul class="toc-item">
<li>
<span><a href="#Setting-Up-Data-Section" data-toc-modified-id="Setting-Up-Data-Section-5.2.1"><span class="toc-item-num">5.2.1&nbsp;&nbsp;</span>Setting Up Data Section</a></span>
</li>
<li>
<span><a href="#Graph-Type-Settings-Section" data-toc-modified-id="Graph-Type-Settings-Section-5.2.2"><span class="toc-item-num">5.2.2&nbsp;&nbsp;</span>Graph Type Settings Section</a></span>
</li>
<li>
<span><a href="#Animation-Settings" data-toc-modified-id="Animation-Settings-5.2.3"><span class="toc-item-num">5.2.3&nbsp;&nbsp;</span>Animation Settings</a></span>
</li>
<li>
<span><a href="#Setting-Up-The-Figure" data-toc-modified-id="Setting-Up-The-Figure-5.2.4"><span class="toc-item-num">5.2.4&nbsp;&nbsp;</span>Setting Up The Figure</a></span>
</li>
<li>
<span><a href="#Setting-Up-Positions-of-X-and-Y-Outputs-For-Value" data-toc-modified-id="Setting-Up-Positions-of-X-and-Y-Outputs-For-Value-5.2.5"><span class="toc-item-num">5.2.5&nbsp;&nbsp;</span>Setting Up Positions of X and Y Outputs For Value</a></span>
</li>
<li>
<span><a href="#Setting-Up-The-Line-Plot" data-toc-modified-id="Setting-Up-The-Line-Plot-5.2.6"><span class="toc-item-num">5.2.6&nbsp;&nbsp;</span>Setting Up The Line Plot</a></span>
</li>
<li>
<span><a href="#Initialization-Function:-Plot-The-Background-of-Each-Frame" data-toc-modified-id="Initialization-Function:-Plot-The-Background-of-Each-Frame-5.2.7"><span class="toc-item-num">5.2.7&nbsp;&nbsp;</span>Initialization Function: Plot The Background of Each Frame</a></span>
</li>
<li>
<span><a href="#Animation-Function.-This-Is-Called-Sequentially" data-toc-modified-id="Animation-Function.-This-Is-Called-Sequentially-5.2.8"><span class="toc-item-num">5.2.8&nbsp;&nbsp;</span>Animation Function. This Is Called Sequentially</a></span>
</li>
<li>
<span><a href="#Save-The-Animation-as-an-mp4." data-toc-modified-id="Save-The-Animation-as-an-mp4.-5.2.9"><span class="toc-item-num">5.2.9&nbsp;&nbsp;</span>Save The Animation as an mp4.</a></span>
</li>
</ul>
</li>
</ul>
</li>
<li>
<span><a href="#Working-Through-Matplotlib-Animation-Tutorial" data-toc-modified-id="Working-Through-Matplotlib-Animation-Tutorial-6"><span class="toc-item-num">6&nbsp;&nbsp;</span>Working Through </a><a href="https://jakevdp.github.io/blog/2012/08/18/matplotlib-animation-tutorial/" target="_blank">Matplotlib Animation Tutorial</a></span>
<ul class="toc-item">
<li>
<span><a href="#Having-Line-Plotted-Through-Time" data-toc-modified-id="Having-Line-Plotted-Through-Time-6.1"><span class="toc-item-num">6.1&nbsp;&nbsp;</span>Having Line Plotted Through Time</a></span>
<ul class="toc-item">
<li>
<span><a href="#Learning-How-Matplotlib-plots" data-toc-modified-id="Learning-How-Matplotlib-plots-6.1.1"><span class="toc-item-num">6.1.1&nbsp;&nbsp;</span>Learning How Matplotlib plots</a></span>
</li>
<li>
<span><a href="#Messing-with-labels" data-toc-modified-id="Messing-with-labels-6.1.2"><span class="toc-item-num">6.1.2&nbsp;&nbsp;</span>Messing with labels</a></span>
</li>
<li>
<span><a href="#print-statements" data-toc-modified-id="print-statements-6.1.3"><span class="toc-item-num">6.1.3&nbsp;&nbsp;</span>print statements</a></span>
</li>
</ul>
</li>
<li>
<span><a href="#Having-a-Dot-Tracking-Along-the-Velocity-Curve" data-toc-modified-id="Having-a-Dot-Tracking-Along-the-Velocity-Curve-6.2"><span class="toc-item-num">6.2&nbsp;&nbsp;</span>Having a Dot Tracking Along the Velocity Curve</a></span>
</li>
<li>
<span><a href="#Figuring-out-Keyerror" data-toc-modified-id="Figuring-out-Keyerror-6.3"><span class="toc-item-num">6.3&nbsp;&nbsp;</span>Figuring out <code>Keyerror</code></a></span>
</li>
</ul>
</li>
<li>
<span><a href="#Messing-with-a-overlapping-graph" data-toc-modified-id="Messing-with-a-overlapping-graph-7"><span class="toc-item-num">7&nbsp;&nbsp;</span>Messing with a overlapping graph</a></span>
</li>
</ul>
</div>
<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>One of my friends approached me asking if I had any experience animating graphs, since I had experience with video editing. Though I had not had any formal experience, I decided that it would be a interesting challenge to embark.</p>
<p>I did some research and found a tutorial as seen in the section “Working Through Matplotlib Animation Tutorial”</p>
</section>
<section id="demonstration" class="level1">
<h1>Demonstration</h1>
<section id="tracking-a-line-through-time" class="level2">
<h2 class="anchored" data-anchor-id="tracking-a-line-through-time">Tracking a Line Through Time</h2>
<p><a class="anchor" id="Tracking-a-Line-Through-Time"></a></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/progressEdd/projects/master/Animating-Velocity-Graph/line_tracking_animated.gif" class="img-fluid figure-img"></p>
<figcaption>basic-animation.gif</figcaption>
</figure>
</div>
</section>
<section id="plotting-a-dot-and-tracking-across-velocity-curve" class="level2">
<h2 class="anchored" data-anchor-id="plotting-a-dot-and-tracking-across-velocity-curve">Plotting a Dot and Tracking Across Velocity Curve</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/progressEdd/projects/master/Animating-Velocity-Graph/dot_tracking_animated.gif" class="img-fluid figure-img"></p>
<figcaption>dot-tracking-animation.gif</figcaption>
</figure>
</div>
</section>
<section id="generating-the-gifs" class="level2">
<h2 class="anchored" data-anchor-id="generating-the-gifs">Generating The Gifs</h2>
<p>To generate these gifs, I used <a href="https://ffmpeg.org/">ffmpeg</a> to convert the mp4s to gifs.</p>
<p>To convert the mp4s to gifs, I opened my directory in the terminal and ran the following ffmpeg command, after converting the video to gif, I added and pushed the files to github. Since github does not show local embeds, I embedded the url of the gif from the github repository.</p>
<pre><code>ffmpeg -i line_tracking_animated.mp4 line_tracking_animated.gif</code></pre>
<p>Alternatively, if you have <a href="https://ffmpeg.org/">ffmpeg</a> installed, you can run the following cell to run it in a jupyter cell</p>
<p>Breakdown of the command * <code>ffmpeg</code> tells the terminal to use ffmpeg * <code>-i</code> tells ffmpeg the input * <code>line_tracking_animated.mp4</code> tells ffmpeg the source file * <code>line_tracking_animated.gif</code> tells ffmpeg the output file title and format</p>
<div id="cell-9" class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>ffmpeg <span class="op">-</span>i line_tracking_animated.mp4 line_tracking_animated.gif</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-10" class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>ffmpeg <span class="op">-</span>i dot_tracking_animated.mp4 dot_tracking_animated.gif</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="importing-libraries-loading-data" class="level1">
<h1>Importing Libraries + Loading Data</h1>
<div id="cell-12" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2020-07-04T22:33:12.478002Z&quot;,&quot;start_time&quot;:&quot;2020-07-04T22:33:12.468424Z&quot;}" data-execution_count="2">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> IPython.core.display <span class="im">import</span> display, HTML  </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>display(HTML(<span class="st">"&lt;style&gt;.container { width:100% !important; }&lt;/style&gt;"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<style>.container { width:100% !important; }</style>
</div>
</div>
<div id="cell-13" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2020-07-04T22:33:15.852735Z&quot;,&quot;start_time&quot;:&quot;2020-07-04T22:33:15.296235Z&quot;}" data-execution_count="3">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> matplotlib <span class="im">import</span> pyplot <span class="im">as</span> plt</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> matplotlib <span class="im">import</span> animation</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> matplotlib.offsetbox <span class="im">import</span> AnchoredText</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-14" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2020-07-04T22:33:17.642384Z&quot;,&quot;start_time&quot;:&quot;2020-07-04T22:33:17.609331Z&quot;}" data-scrolled="false" data-execution_count="4">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">"velocity.csv"</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Time (ms)</th>
<th data-quarto-table-cell-role="th">Velocity (m/s)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>0</td>
<td>0.03</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>17</td>
<td>0.03</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>34</td>
<td>0.03</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>50</td>
<td>0.03</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>67</td>
<td>0.03</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1314</td>
<td>22167</td>
<td>0.89</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1315</td>
<td>22183</td>
<td>0.89</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1316</td>
<td>22200</td>
<td>0.41</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1317</td>
<td>22217</td>
<td>0.41</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1318</td>
<td>22233</td>
<td>0.41</td>
</tr>
</tbody>
</table>

<p>1319 rows × 2 columns</p>
</div>
</div>
</div>
<div id="cell-15" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2020-07-04T22:33:19.492528Z&quot;,&quot;start_time&quot;:&quot;2020-07-04T22:33:19.471006Z&quot;}" data-execution_count="5">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"max time"</span>) </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>display(df[<span class="st">"Time (ms)"</span>].<span class="bu">max</span>())</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"min time"</span>)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>display(df[<span class="st">"Time (ms)"</span>].<span class="bu">min</span>())</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Velocity"</span>)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>display(df[<span class="st">"Velocity (m/s)"</span>][<span class="dv">1</span>])</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Max Velocity"</span>)</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>display(df[<span class="st">"Velocity (m/s)"</span>].<span class="bu">max</span>())</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Final time"</span>)</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>display(df[<span class="st">"Time (ms)"</span>].iloc[<span class="op">-</span><span class="dv">1</span>]<span class="op">*</span><span class="dv">60</span><span class="op">/</span><span class="dv">1000</span>)</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Final time rounded"</span>)</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>display(<span class="bu">int</span>(<span class="bu">round</span>(df[<span class="st">"Time (ms)"</span>].iloc[<span class="op">-</span><span class="dv">1</span>]<span class="op">*</span><span class="dv">60</span><span class="op">/</span><span class="dv">1000</span>, <span class="dv">1</span>)))</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"column titles"</span>)</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>column_titles <span class="op">=</span> <span class="bu">list</span>(df.columns.values) </span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>display(column_titles)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>max time</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre><code>22233</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>min time</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre><code>0</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Velocity</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre><code>0.03</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Max Velocity</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre><code>20.5</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Final time</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre><code>1333.98</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Final time rounded</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre><code>1334</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>column titles</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre><code>['Time (ms)', 'Velocity (m/s)']</code></pre>
</div>
</div>
</section>
<section id="plotting-function" class="level1">
<h1>Plotting Function</h1>
<p><a class="anchor" id="Plotting-Function"></a> I wrote the <code>animateGraph</code> after modifying <a href="https://jakevdp.github.io/blog/2012/08/18/matplotlib-animation-tutorial/">Matplotlib Animation Tutorial</a> to work for my velocity data from the <code>Having Line Plotted Through Time</code> section and later <code>Having a Dot Tracking Along the Velocity Curve</code>.</p>
<p>The function takes the general structure of the respective and makes it into a single function</p>
<section id="explanation-of-inputs" class="level2">
<h2 class="anchored" data-anchor-id="explanation-of-inputs">Explanation of Inputs</h2>
<ul>
<li><code>df</code> input <code>DataFrame</code></li>
<li><code>x_column</code> column title for x axis</li>
<li><code>y_column</code> column title for y axis</li>
<li><code>dot_track</code> takes <code>yes</code> or <code>no</code>, if it is not <code>yes</code>, it will default to the line graph</li>
<li><code>framerate</code> integer that specifies the video’s framerate</li>
</ul>
</section>
<section id="explanation-of-variables" class="level2">
<h2 class="anchored" data-anchor-id="explanation-of-variables">Explanation of Variables</h2>
<section id="setting-up-data-section" class="level3">
<h3 class="anchored" data-anchor-id="setting-up-data-section">Setting Up Data Section</h3>
<ul>
<li><code>x_df</code> <code>DataFrame</code> of just the x values, I seperated the x and y <code>DataFrames</code> to make it easier to follow in the animation function</li>
<li><code>y_df</code> <code>DataFrame</code> of just the x values, I seperated the x and y <code>DataFrames</code> to make it easier to follow in the animation function</li>
<li><code>x_max</code> maximum of the x values, used to set the bounds of x axis</li>
<li><code>y_max</code> maximum of the y values, used to set the bounds of y axis, added <code>2</code> to make space for the time and velocity printouts</li>
<li><code>last_index</code> used to prevent <code>Keyerror</code>, see <code>Figuring out Keyerror</code> section for a more in depth explanation</li>
</ul>
</section>
<section id="graph-type-settings-section" class="level3">
<h3 class="anchored" data-anchor-id="graph-type-settings-section">Graph Type Settings Section</h3>
<ul>
<li><code>plot_dot</code> boolean used to decide which animation to use, if <code>True</code> will have animation output the dot tracker on graph</li>
<li><code>graph_type</code> string used to keep track of the animation, used for filename
<ul>
<li>can be either <code>dot_tracking</code> or <code>line_tracking</code></li>
</ul></li>
</ul>
</section>
<section id="animation-settings" class="level3">
<h3 class="anchored" data-anchor-id="animation-settings">Animation Settings</h3>
<ul>
<li><code>time_seconds</code> takes last entry of x value to get the duration of the data converts from miliseconds to seconds, used later for <code>totalFrames</code> animation duration calculation</li>
<li><code>totalFrames</code> product of <code>framerate</code> and <code>time_seconds</code> to get the number of frames for matplotlib to animate</li>
</ul>
</section>
<section id="setting-up-the-figure" class="level3">
<h3 class="anchored" data-anchor-id="setting-up-the-figure">Setting Up The Figure</h3>
<ul>
<li><code>fig</code> figure variable, stores figure object
<ul>
<li>the size was set to <code>(20,12)</code></li>
<li>I followed the suggestions to change the size and output a sample file from <a href="https://stackoverflow.com/questions/332289/how-do-you-change-the-size-of-figures-drawn-with-matplotlib"> Stack Overflow How to Change Figure Size </a></li>
<li>I followed the suggestions to change the font size from <a href="https://stackoverflow.com/questions/3899980/how-to-change-the-font-size-on-a-matplotlib-plot"> Stack Overflow How to Change Font Size </a></li>
</ul></li>
</ul>
</section>
<section id="setting-up-positions-of-x-and-y-outputs-for-value" class="level3">
<h3 class="anchored" data-anchor-id="setting-up-positions-of-x-and-y-outputs-for-value">Setting Up Positions of X and Y Outputs For Value</h3>
<ul>
<li>I followed the example set by the matplotlib wiki from <a href="https://matplotlib.org/3.1.3/tutorials/text/text_props.html#sphx-glr-tutorials-text-text-props-py"> Text properties and layout </a></li>
<li><code>y_value_print</code> text object, will set the y value, for the demo, we use velocity set for <code>right</code> and <code>top</code> is updated frame by frame in the <code>animate(i)</code> function</li>
<li><code>x_value_print</code> text object, will set the x value, for the demo, we use time set for <code>left</code> and <code>top</code> is updated frame by frame in the <code>animate(i)</code> function</li>
</ul>
</section>
<section id="setting-up-the-line-plot" class="level3">
<h3 class="anchored" data-anchor-id="setting-up-the-line-plot">Setting Up The Line Plot</h3>
<ul>
<li>I used the <code>plot_dot</code> to determine which graph should be plotted
<ul>
<li>if <code>plot_dot</code> is <code>True</code>, we will plot the existing graph and have the dot</li>
<li>if <code>plot_dot</code> is <code>False</code>, we will plot the graph sections frame by frame</li>
</ul></li>
<li>To get the red dot, I read the instructions of the different passable arguments from the matplotlib wiki from <a href="https://matplotlib.org/3.2.1/api/_as_gen/matplotlib.pyplot.plot.html#examples-using-matplotlib-pyplot-plot"> matplotlib.pyplot.plot </a></li>
</ul>
</section>
<section id="initialization-function-plot-the-background-of-each-frame" class="level3">
<h3 class="anchored" data-anchor-id="initialization-function-plot-the-background-of-each-frame">Initialization Function: Plot The Background of Each Frame</h3>
<ul>
<li>I kept the example set from the guide see <code>Working Through Matplotlib Animation Tutorial</code> for more details</li>
</ul>
</section>
<section id="animation-function.-this-is-called-sequentially" class="level3">
<h3 class="anchored" data-anchor-id="animation-function.-this-is-called-sequentially">Animation Function. This Is Called Sequentially</h3>
<ul>
<li>This section is broken up into two parts,
<ol type="1">
<li>Checking if the function reaches the last value of the <code>DataFrame</code></li>
<li>updating the x and y column print outs</li>
</ol></li>
<li>To check if the function has reached the last value of the <code>DataFrame</code>, we have a <code>if</code> conditional that checks if the <code>animate</code> function has reached the end of the <code>DataFrame</code>, if it does, then it will use the value at <code>last_index</code>, we want it to keep the last value to avoid the <code>Keyerror</code> as explained in the later experimental section</li>
<li>Next, the function will set the <code>x_value</code> and <code>y_value</code> to be the final index value
<ul>
<li><code>x_value</code> and <code>y_value</code> is used for animating the labels for the values of x and y</li>
</ul></li>
<li>Afterwards the function follow a second <code>if</code> statement, which will check if <code>plot_dot</code> is true or false
<ul>
<li>if <code>plot_dot</code> is <code>False</code>, the function will output everything up until the current <code>i</code> index value.
<ul>
<li>This is used for the animation that plots graph sections frame by frame</li>
</ul></li>
<li>if <code>plot_dot</code> is <code>True</code>, the function will output the current <code>i</code> index value.
<ul>
<li>This is used for the animation that plots the point frame by frame</li>
</ul></li>
</ul></li>
<li>The next section will update the x and y column print out values for each frame I took inspiration from <a href="https://brushingupscience.com/2016/06/21/matplotlib-animations-the-easy-way/"> Matplotlib animations the easy way </a> specifically the <code>"Changing labels and text"</code> section
<ul>
<li><code>values_x</code> is a string variable that stores the x column title, adds colons, and the x value</li>
<li><code>values_y</code> is a string variable that stores the y column title, adds colons, and the y value</li>
<li>After setting <code>values_x</code> and <code>values_y</code> we use <code>.set_text()</code> to update the <code>y_value_print</code> and <code>x_value_print</code> each time</li>
</ul></li>
<li>Once all the variables have been updated, <code>animate(i)</code> will return the <code>line</code> to the <code>animation.FuncAnimation()</code>, which will continue until it reaches the last frame</li>
</ul>
</section>
<section id="save-the-animation-as-an-mp4." class="level3">
<h3 class="anchored" data-anchor-id="save-the-animation-as-an-mp4.">Save The Animation as an mp4.</h3>
<ul>
<li>I did not make significant changes to the original, I only changed the filename to match the graph type.
<ul>
<li>I wanted the filename to be the ’ <code>x_column</code> vs <code>y_column</code> <code>graph_type</code> _animated.mp4’</li>
<li>The ideal file name would be ’Velocity_(m/s)_vs_Time (ms)_line_tracking_animated.mp4
<ul>
<li>When I tried parsing the <code>x_column</code> as a string, python had serious issues with the slash (/) part of (m/s), enough so that it would prevent the file from being saved</li>
<li>An potential alternative solution would to change m/s to m<em>s^-1, but it require changing the data or engineering a solution that read the units and replaced slashes with </em> unit^-1. After evaluating the alternatives, I realized it would be easier to rename the file. If this function were used to generate hundreds of graphs from hundreds of source files, I would need to find a better solution. Since the purpose of this function is to make it easier to change between the dot and line tracking, I did not invest any further time into developing an alternative solution</li>
</ul></li>
</ul></li>
</ul>
<div id="cell-17" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2020-06-27T18:26:35.507239Z&quot;,&quot;start_time&quot;:&quot;2020-06-27T18:26:35.481303Z&quot;}" data-execution_count="5">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> animateGraph(df,x_column, y_column, dot_track, framerate):</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Setting up data</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    x_df <span class="op">=</span> df[x_column]</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    y_df <span class="op">=</span> df[y_column]</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>    x_max <span class="op">=</span> <span class="bu">int</span>(np.ceil(df[x_column].<span class="bu">max</span>()))</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    y_max <span class="op">=</span> <span class="bu">int</span>(np.ceil(df[y_column].<span class="bu">max</span>())) <span class="op">+</span> <span class="dv">2</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>    last_index <span class="op">=</span> <span class="bu">len</span>(df)<span class="op">-</span><span class="dv">1</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Check if we are plotting the graph or a graph + dot</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(dot_track.lower() <span class="op">==</span> <span class="st">"yes"</span>):</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>        plot_dot <span class="op">=</span> <span class="va">True</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>        graph_type <span class="op">=</span> <span class="st">"dot_tracking"</span></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>        plot_dot <span class="op">=</span> <span class="va">False</span>  </span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>        graph_type <span class="op">=</span> <span class="st">"line_tracking"</span></span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Animation settings</span></span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>    time_seconds <span class="op">=</span> x_df.iloc[<span class="op">-</span><span class="dv">1</span>]<span class="op">/</span><span class="dv">1000</span></span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>    totalFrames <span class="op">=</span> <span class="bu">int</span>(<span class="bu">round</span>(framerate <span class="op">*</span> time_seconds))</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Setting up the figure</span></span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>    fig <span class="op">=</span> plt.figure()</span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>    fig.set_size_inches(<span class="dv">20</span>, <span class="dv">12</span>)</span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>    fig.savefig(<span class="st">'test2png.png'</span>, dpi<span class="op">=</span><span class="dv">100</span>)</span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>    plt.rcParams.update({<span class="st">'font.size'</span>: <span class="dv">24</span>})</span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Setting up the axes    </span></span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a>    ax <span class="op">=</span> plt.axes(xlim<span class="op">=</span>(<span class="dv">0</span>, x_max), ylim<span class="op">=</span>(<span class="dv">0</span>, y_max))</span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a>    ax.<span class="bu">set</span>(title<span class="op">=</span> x_column <span class="op">+</span> <span class="st">' vs '</span> <span class="op">+</span> y_column,</span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a>           ylabel<span class="op">=</span> y_column,</span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true" tabindex="-1"></a>           xlabel<span class="op">=</span> x_column,</span>
<span id="cb22-32"><a href="#cb22-32" aria-hidden="true" tabindex="-1"></a>           )</span>
<span id="cb22-33"><a href="#cb22-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Setting up the positions of velocity and time outputs</span></span>
<span id="cb22-34"><a href="#cb22-34" aria-hidden="true" tabindex="-1"></a>    left, width <span class="op">=</span> <span class="fl">.1</span>, <span class="fl">.75</span></span>
<span id="cb22-35"><a href="#cb22-35" aria-hidden="true" tabindex="-1"></a>    bottom, height <span class="op">=</span> <span class="fl">.25</span>, <span class="fl">.73</span></span>
<span id="cb22-36"><a href="#cb22-36" aria-hidden="true" tabindex="-1"></a>    right <span class="op">=</span> left <span class="op">+</span> width</span>
<span id="cb22-37"><a href="#cb22-37" aria-hidden="true" tabindex="-1"></a>    top <span class="op">=</span> bottom <span class="op">+</span> height</span>
<span id="cb22-38"><a href="#cb22-38" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb22-39"><a href="#cb22-39" aria-hidden="true" tabindex="-1"></a>    y_value_print <span class="op">=</span> ax.text(right, top, <span class="st">"y value"</span>, </span>
<span id="cb22-40"><a href="#cb22-40" aria-hidden="true" tabindex="-1"></a>                             horizontalalignment<span class="op">=</span><span class="st">'right'</span>,</span>
<span id="cb22-41"><a href="#cb22-41" aria-hidden="true" tabindex="-1"></a>                             verticalalignment<span class="op">=</span><span class="st">'top'</span>,</span>
<span id="cb22-42"><a href="#cb22-42" aria-hidden="true" tabindex="-1"></a>                             transform<span class="op">=</span>ax.transAxes)</span>
<span id="cb22-43"><a href="#cb22-43" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb22-44"><a href="#cb22-44" aria-hidden="true" tabindex="-1"></a>    x_value_print <span class="op">=</span> ax.text(left, top, <span class="st">"x value"</span>, </span>
<span id="cb22-45"><a href="#cb22-45" aria-hidden="true" tabindex="-1"></a>                             horizontalalignment<span class="op">=</span><span class="st">'left'</span>,</span>
<span id="cb22-46"><a href="#cb22-46" aria-hidden="true" tabindex="-1"></a>                             verticalalignment<span class="op">=</span><span class="st">'top'</span>,</span>
<span id="cb22-47"><a href="#cb22-47" aria-hidden="true" tabindex="-1"></a>                             transform<span class="op">=</span>ax.transAxes)    </span>
<span id="cb22-48"><a href="#cb22-48" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb22-49"><a href="#cb22-49" aria-hidden="true" tabindex="-1"></a><span class="co"># Setting up the line plot    </span></span>
<span id="cb22-50"><a href="#cb22-50" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(plot_dot <span class="op">==</span> <span class="va">True</span>):</span>
<span id="cb22-51"><a href="#cb22-51" aria-hidden="true" tabindex="-1"></a>        plt.plot(x_df, y_df)</span>
<span id="cb22-52"><a href="#cb22-52" aria-hidden="true" tabindex="-1"></a>        line, <span class="op">=</span> plt.plot([], [], linestyle<span class="op">=</span><span class="st">'none'</span>, marker <span class="op">=</span> <span class="st">'o'</span>, ms <span class="op">=</span> <span class="dv">10</span>, color<span class="op">=</span><span class="st">'r'</span>)</span>
<span id="cb22-53"><a href="#cb22-53" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb22-54"><a href="#cb22-54" aria-hidden="true" tabindex="-1"></a>        line, <span class="op">=</span> plt.plot(x_df, y_df)</span>
<span id="cb22-55"><a href="#cb22-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-56"><a href="#cb22-56" aria-hidden="true" tabindex="-1"></a><span class="co"># initialization function: plot the background of each frame</span></span>
<span id="cb22-57"><a href="#cb22-57" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> init():</span>
<span id="cb22-58"><a href="#cb22-58" aria-hidden="true" tabindex="-1"></a>        line.set_data([], [])</span>
<span id="cb22-59"><a href="#cb22-59" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> line,  </span>
<span id="cb22-60"><a href="#cb22-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-61"><a href="#cb22-61" aria-hidden="true" tabindex="-1"></a><span class="co"># animation function. This is called sequentially</span></span>
<span id="cb22-62"><a href="#cb22-62" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> animate(i):</span>
<span id="cb22-63"><a href="#cb22-63" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(i <span class="op">&gt;</span> last_index):</span>
<span id="cb22-64"><a href="#cb22-64" aria-hidden="true" tabindex="-1"></a>            x_value <span class="op">=</span> x_df[last_index]</span>
<span id="cb22-65"><a href="#cb22-65" aria-hidden="true" tabindex="-1"></a>            y_value <span class="op">=</span> y_df[last_index]</span>
<span id="cb22-66"><a href="#cb22-66" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb22-67"><a href="#cb22-67" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span>(plot_dot <span class="op">==</span> <span class="va">False</span>):</span>
<span id="cb22-68"><a href="#cb22-68" aria-hidden="true" tabindex="-1"></a>                x <span class="op">=</span> x_df[<span class="dv">0</span>:last_index]</span>
<span id="cb22-69"><a href="#cb22-69" aria-hidden="true" tabindex="-1"></a>                y <span class="op">=</span> y_df[<span class="dv">0</span>:last_index]</span>
<span id="cb22-70"><a href="#cb22-70" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb22-71"><a href="#cb22-71" aria-hidden="true" tabindex="-1"></a>                x <span class="op">=</span> x_df[last_index]</span>
<span id="cb22-72"><a href="#cb22-72" aria-hidden="true" tabindex="-1"></a>                y <span class="op">=</span> y_df[last_index]</span>
<span id="cb22-73"><a href="#cb22-73" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb22-74"><a href="#cb22-74" aria-hidden="true" tabindex="-1"></a>            x_value <span class="op">=</span> x_df[i]</span>
<span id="cb22-75"><a href="#cb22-75" aria-hidden="true" tabindex="-1"></a>            y_value <span class="op">=</span> y_df[i]</span>
<span id="cb22-76"><a href="#cb22-76" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb22-77"><a href="#cb22-77" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span>(plot_dot <span class="op">==</span> <span class="va">False</span>):</span>
<span id="cb22-78"><a href="#cb22-78" aria-hidden="true" tabindex="-1"></a>                x <span class="op">=</span> x_df[<span class="dv">0</span>:i]</span>
<span id="cb22-79"><a href="#cb22-79" aria-hidden="true" tabindex="-1"></a>                y <span class="op">=</span> y_df[<span class="dv">0</span>:i]</span>
<span id="cb22-80"><a href="#cb22-80" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb22-81"><a href="#cb22-81" aria-hidden="true" tabindex="-1"></a>                x <span class="op">=</span> x_df[i]</span>
<span id="cb22-82"><a href="#cb22-82" aria-hidden="true" tabindex="-1"></a>                y <span class="op">=</span> y_df[i]</span>
<span id="cb22-83"><a href="#cb22-83" aria-hidden="true" tabindex="-1"></a>        line.set_data(x, y)</span>
<span id="cb22-84"><a href="#cb22-84" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb22-85"><a href="#cb22-85" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Update the figure with x and y values    </span></span>
<span id="cb22-86"><a href="#cb22-86" aria-hidden="true" tabindex="-1"></a>        values_x <span class="op">=</span> x_column <span class="op">+</span> <span class="st">": "</span> <span class="op">+</span> <span class="bu">str</span>(x_value)</span>
<span id="cb22-87"><a href="#cb22-87" aria-hidden="true" tabindex="-1"></a>        values_y <span class="op">=</span> y_column <span class="op">+</span> <span class="st">": "</span> <span class="op">+</span> <span class="bu">str</span>(y_value)</span>
<span id="cb22-88"><a href="#cb22-88" aria-hidden="true" tabindex="-1"></a>        y_value_print.set_text(values_y)</span>
<span id="cb22-89"><a href="#cb22-89" aria-hidden="true" tabindex="-1"></a>        x_value_print.set_text(values_x)</span>
<span id="cb22-90"><a href="#cb22-90" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> line,</span>
<span id="cb22-91"><a href="#cb22-91" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb22-92"><a href="#cb22-92" aria-hidden="true" tabindex="-1"></a><span class="co"># call the animator.  blit=True means only re-draw the parts that have changed.</span></span>
<span id="cb22-93"><a href="#cb22-93" aria-hidden="true" tabindex="-1"></a>    anim <span class="op">=</span> animation.FuncAnimation(fig, animate, init_func<span class="op">=</span>init,frames <span class="op">=</span> totalFrames, interval<span class="op">=</span><span class="dv">0</span>, blit<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb22-94"><a href="#cb22-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-95"><a href="#cb22-95" aria-hidden="true" tabindex="-1"></a><span class="co"># save the animation as an mp4.  This requires ffmpeg or mencoder to be</span></span>
<span id="cb22-96"><a href="#cb22-96" aria-hidden="true" tabindex="-1"></a><span class="co"># installed.  The extra_args ensure that the x264 codec is used, so that</span></span>
<span id="cb22-97"><a href="#cb22-97" aria-hidden="true" tabindex="-1"></a><span class="co"># the video can be embedded in html5.  You may need to adjust this for</span></span>
<span id="cb22-98"><a href="#cb22-98" aria-hidden="true" tabindex="-1"></a><span class="co"># your system: for more information, see</span></span>
<span id="cb22-99"><a href="#cb22-99" aria-hidden="true" tabindex="-1"></a><span class="co"># http://matplotlib.sourceforge.net/api/animation_api.html</span></span>
<span id="cb22-100"><a href="#cb22-100" aria-hidden="true" tabindex="-1"></a>    anim.save(graph_type <span class="op">+</span> <span class="st">'_animated.mp4'</span>, fps<span class="op">=</span>framerate, extra_args<span class="op">=</span>[<span class="st">'-vcodec'</span>, <span class="st">'libx264'</span>])</span>
<span id="cb22-101"><a href="#cb22-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-102"><a href="#cb22-102" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-18" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2020-06-27T18:18:25.235400Z&quot;,&quot;start_time&quot;:&quot;2020-06-27T18:17:30.354565Z&quot;}" data-scrolled="false" data-execution_count="7">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>animateGraph(df,<span class="st">"Time (ms)"</span>, <span class="st">"Velocity (m/s)"</span>, <span class="st">"yes"</span>, <span class="dv">60</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2020-07-02-Animating-Velocity-Graph_files/figure-html/cell-9-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-19" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2020-06-26T02:50:08.826091Z&quot;,&quot;start_time&quot;:&quot;2020-06-26T02:49:11.892463Z&quot;}" data-execution_count="28">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>animateGraph(df,<span class="st">"Time (ms)"</span>, <span class="st">"Velocity (m/s)"</span>, <span class="st">"no"</span>, <span class="dv">60</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2020-07-02-Animating-Velocity-Graph_files/figure-html/cell-10-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="working-through-matplotlib-animation-tutorial" class="level1">
<h1>Working Through <a href="https://jakevdp.github.io/blog/2012/08/18/matplotlib-animation-tutorial/">Matplotlib Animation Tutorial</a></h1>
<p>I used Jake Vanderplas’s sine wave example posted below as a base to understand how matplotlib animates. I modified it to make it work with the velocity and time data I was given from my friend.</p>
<div id="cell-21" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2020-06-27T19:15:25.183688Z&quot;,&quot;start_time&quot;:&quot;2020-06-27T19:15:18.478512Z&quot;}" data-execution_count="1">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co">"""</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="co">Matplotlib Animation Example</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="co">author: Jake Vanderplas</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="co">email: vanderplas@astro.washington.edu</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="co">website: http://jakevdp.github.com</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="co">license: BSD</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="co">Please feel free to use and modify this, but keep the above information. Thanks!</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a><span class="co">"""</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> matplotlib <span class="im">import</span> pyplot <span class="im">as</span> plt</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> matplotlib <span class="im">import</span> animation</span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a><span class="co"># First set up the figure, the axis, and the plot element we want to animate</span></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> plt.figure()</span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> plt.axes(xlim<span class="op">=</span>(<span class="dv">0</span>, <span class="dv">2</span>), ylim<span class="op">=</span>(<span class="op">-</span><span class="dv">2</span>, <span class="dv">2</span>))</span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>line, <span class="op">=</span> ax.plot([], [], lw<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a><span class="co"># initialization function: plot the background of each frame</span></span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> init():</span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>    line.set_data([], [])</span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> line,</span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a><span class="co"># animation function.  This is called sequentially</span></span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> animate(i):</span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> np.linspace(<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">1000</span>)</span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a>    y <span class="op">=</span> np.sin(<span class="dv">2</span> <span class="op">*</span> np.pi <span class="op">*</span> (x <span class="op">-</span> <span class="fl">0.01</span> <span class="op">*</span> i))</span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a>    line.set_data(x, y)</span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> line,</span>
<span id="cb25-31"><a href="#cb25-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-32"><a href="#cb25-32" aria-hidden="true" tabindex="-1"></a><span class="co"># call the animator.  blit=True means only re-draw the parts that have changed.</span></span>
<span id="cb25-33"><a href="#cb25-33" aria-hidden="true" tabindex="-1"></a>anim <span class="op">=</span> animation.FuncAnimation(fig, animate, init_func<span class="op">=</span>init,</span>
<span id="cb25-34"><a href="#cb25-34" aria-hidden="true" tabindex="-1"></a>                               frames<span class="op">=</span><span class="dv">200</span>, interval<span class="op">=</span><span class="dv">20</span>, blit<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb25-35"><a href="#cb25-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-36"><a href="#cb25-36" aria-hidden="true" tabindex="-1"></a><span class="co"># save the animation as an mp4.  This requires ffmpeg or mencoder to be</span></span>
<span id="cb25-37"><a href="#cb25-37" aria-hidden="true" tabindex="-1"></a><span class="co"># installed.  The extra_args ensure that the x264 codec is used, so that</span></span>
<span id="cb25-38"><a href="#cb25-38" aria-hidden="true" tabindex="-1"></a><span class="co"># the video can be embedded in html5.  You may need to adjust this for</span></span>
<span id="cb25-39"><a href="#cb25-39" aria-hidden="true" tabindex="-1"></a><span class="co"># your system: for more information, see</span></span>
<span id="cb25-40"><a href="#cb25-40" aria-hidden="true" tabindex="-1"></a><span class="co"># http://matplotlib.sourceforge.net/api/animation_api.html</span></span>
<span id="cb25-41"><a href="#cb25-41" aria-hidden="true" tabindex="-1"></a>anim.save(<span class="st">'basic_animation.mp4'</span>, fps<span class="op">=</span><span class="dv">30</span>, extra_args<span class="op">=</span>[<span class="st">'-vcodec'</span>, <span class="st">'libx264'</span>])</span>
<span id="cb25-42"><a href="#cb25-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-43"><a href="#cb25-43" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2020-07-02-Animating-Velocity-Graph_files/figure-html/cell-11-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<section id="having-line-plotted-through-time" class="level2">
<h2 class="anchored" data-anchor-id="having-line-plotted-through-time">Having Line Plotted Through Time</h2>
<p>From the base I added my own modifications titled <code>Tracking a Line Through time</code>, which included * setting variables for velocity (<code>y_df</code>) and time (<code>x_df</code>) dataframes * setting maximums for x and y * setting a <code>time_seconds</code> variable that converts the time in milliseconds to seconds * setting a <code>framerate</code> variable that sets the framerate of the graph * setting a <code>totalFrames</code> variable that sets the duration of the animation * increasing the figure size from 64x64 to a bigger 18.5x10.4 inch higher resolution figure with <code>fig.set_size_inches()</code> * increasing the framerate to 60 frames a second (setting <code>framerate</code> to <code>60</code>), which makes the plot smoother * only downside is that it will take extra time to encode the final mp4 * modifying the limits. * adding titles for the figure * having the the animation plot the figure as time passes, rather needing a known function to plot it</p>
<div id="cell-23" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2020-06-19T21:42:50.819062Z&quot;,&quot;start_time&quot;:&quot;2020-06-19T21:41:52.546499Z&quot;}" data-scrolled="true" data-execution_count="88">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>x_df <span class="op">=</span> df[<span class="st">"Time (ms)"</span>]</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>y_df <span class="op">=</span> df[<span class="st">"Velocity"</span>]</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>x_max <span class="op">=</span> <span class="bu">int</span>(np.ceil(df[<span class="st">"Time (ms)"</span>].<span class="bu">max</span>()))</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>y_max <span class="op">=</span> <span class="bu">int</span>(np.ceil(df[<span class="st">"Velocity"</span>].<span class="bu">max</span>()))</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>time_seconds <span class="op">=</span> x_df.iloc[<span class="op">-</span><span class="dv">1</span>]<span class="op">/</span><span class="dv">1000</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>framerate <span class="op">=</span> <span class="dv">60</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>totalFrames <span class="op">=</span> <span class="bu">int</span>(<span class="bu">round</span>(framerate <span class="op">*</span> time_seconds))</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a><span class="co"># First set up the figure, the axis, and the plot element we want to animate</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> plt.figure()</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>fig.set_size_inches(<span class="fl">18.5</span>, <span class="fl">10.5</span>)</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>fig.savefig(<span class="st">'test2png.png'</span>, dpi<span class="op">=</span><span class="dv">100</span>)</span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a><span class="co"># transparency settings for the figure</span></span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a><span class="co">#fig.patch.set_alpha(0.)</span></span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> plt.axes(xlim<span class="op">=</span>(<span class="dv">0</span>, x_max), ylim<span class="op">=</span>(<span class="dv">0</span>, y_max))</span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>ax.<span class="bu">set</span>(title<span class="op">=</span><span class="st">'Velocity vs Time'</span>,</span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>           ylabel<span class="op">=</span><span class="st">"Velocity"</span>,</span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a>           xlabel<span class="op">=</span><span class="st">"Time (ms)"</span>)</span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a>line, <span class="op">=</span> plt.plot(x_df, y_df)</span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a><span class="co"># initialization function: plot the background of each frame</span></span>
<span id="cb26-26"><a href="#cb26-26" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> init():</span>
<span id="cb26-27"><a href="#cb26-27" aria-hidden="true" tabindex="-1"></a>    line.set_data([], [])</span>
<span id="cb26-28"><a href="#cb26-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> line,</span>
<span id="cb26-29"><a href="#cb26-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-30"><a href="#cb26-30" aria-hidden="true" tabindex="-1"></a><span class="co"># animation function.  This is called sequentially</span></span>
<span id="cb26-31"><a href="#cb26-31" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> animate(i):</span>
<span id="cb26-32"><a href="#cb26-32" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> x_df[<span class="dv">0</span>:i]</span>
<span id="cb26-33"><a href="#cb26-33" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"i"</span>, i)</span>
<span id="cb26-34"><a href="#cb26-34" aria-hidden="true" tabindex="-1"></a>    y <span class="op">=</span> y_df[<span class="dv">0</span>:i]</span>
<span id="cb26-35"><a href="#cb26-35" aria-hidden="true" tabindex="-1"></a>    line.set_data(x, y)</span>
<span id="cb26-36"><a href="#cb26-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> line,</span>
<span id="cb26-37"><a href="#cb26-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-38"><a href="#cb26-38" aria-hidden="true" tabindex="-1"></a><span class="co"># call the animator.  blit=True means only re-draw the parts that have changed.</span></span>
<span id="cb26-39"><a href="#cb26-39" aria-hidden="true" tabindex="-1"></a>anim <span class="op">=</span> animation.FuncAnimation(fig, animate, init_func<span class="op">=</span>init,frames <span class="op">=</span> totalFrames, interval<span class="op">=</span><span class="dv">0</span>, blit<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb26-40"><a href="#cb26-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-41"><a href="#cb26-41" aria-hidden="true" tabindex="-1"></a><span class="co"># save the animation as an mp4.  This requires ffmpeg or mencoder to be</span></span>
<span id="cb26-42"><a href="#cb26-42" aria-hidden="true" tabindex="-1"></a><span class="co"># installed.  The extra_args ensure that the x264 codec is used, so that</span></span>
<span id="cb26-43"><a href="#cb26-43" aria-hidden="true" tabindex="-1"></a><span class="co"># the video can be embedded in html5.  You may need to adjust this for</span></span>
<span id="cb26-44"><a href="#cb26-44" aria-hidden="true" tabindex="-1"></a><span class="co"># your system: for more information, see</span></span>
<span id="cb26-45"><a href="#cb26-45" aria-hidden="true" tabindex="-1"></a><span class="co"># http://matplotlib.sourceforge.net/api/animation_api.html</span></span>
<span id="cb26-46"><a href="#cb26-46" aria-hidden="true" tabindex="-1"></a>anim.save(<span class="st">'basic_animation.mp4'</span>, fps<span class="op">=</span>framerate, extra_args<span class="op">=</span>[<span class="st">'-vcodec'</span>, <span class="st">'libx264'</span>])</span>
<span id="cb26-47"><a href="#cb26-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-48"><a href="#cb26-48" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>i 0
i 1
i 2
i 3
i 4
i 5
i 6
i 7
i 8
i 9
i 10
i 11
i 12
i 13
i 14
i 15
i 16
i 17
i 18
i 19
i 20
i 21
i 22
i 23
i 24
i 25
i 26
i 27
i 28
i 29
i 30
i 31
i 32
i 33
i 34
i 35
i 36
i 37
i 38
i 39
i 40
i 41
i 42
i 43
i 44
i 45
i 46
i 47
i 48
i 49
i 50
i 51
i 52
i 53
i 54
i 55
i 56
i 57
i 58
i 59
i 60
i 61
i 62
i 63
i 64
i 65
i 66
i 67
i 68
i 69
i 70
i 71
i 72
i 73
i 74
i 75
i 76
i 77
i 78
i 79
i 80
i 81
i 82
i 83
i 84
i 85
i 86
i 87
i 88
i 89
i 90
i 91
i 92
i 93
i 94
i 95
i 96
i 97
i 98
i 99
i 100
i 101
i 102
i 103
i 104
i 105
i 106
i 107
i 108
i 109
i 110
i 111
i 112
i 113
i 114
i 115
i 116
i 117
i 118
i 119
i 120
i 121
i 122
i 123
i 124
i 125
i 126
i 127
i 128
i 129
i 130
i 131
i 132
i 133
i 134
i 135
i 136
i 137
i 138
i 139
i 140
i 141
i 142
i 143
i 144
i 145
i 146
i 147
i 148
i 149
i 150
i 151
i 152
i 153
i 154
i 155
i 156
i 157
i 158
i 159
i 160
i 161
i 162
i 163
i 164
i 165
i 166
i 167
i 168
i 169
i 170
i 171
i 172
i 173
i 174
i 175
i 176
i 177
i 178
i 179
i 180
i 181
i 182
i 183
i 184
i 185
i 186
i 187
i 188
i 189
i 190
i 191
i 192
i 193
i 194
i 195
i 196
i 197
i 198
i 199
i 200
i 201
i 202
i 203
i 204
i 205
i 206
i 207
i 208
i 209
i 210
i 211
i 212
i 213
i 214
i 215
i 216
i 217
i 218
i 219
i 220
i 221
i 222
i 223
i 224
i 225
i 226
i 227
i 228
i 229
i 230
i 231
i 232
i 233
i 234
i 235
i 236
i 237
i 238
i 239
i 240
i 241
i 242
i 243
i 244
i 245
i 246
i 247
i 248
i 249
i 250
i 251
i 252
i 253
i 254
i 255
i 256
i 257
i 258
i 259
i 260
i 261
i 262
i 263
i 264
i 265
i 266
i 267
i 268
i 269
i 270
i 271
i 272
i 273
i 274
i 275
i 276
i 277
i 278
i 279
i 280
i 281
i 282
i 283
i 284
i 285
i 286
i 287
i 288
i 289
i 290
i 291
i 292
i 293
i 294
i 295
i 296
i 297
i 298
i 299
i 300
i 301
i 302
i 303
i 304
i 305
i 306
i 307
i 308
i 309
i 310
i 311
i 312
i 313
i 314
i 315
i 316
i 317
i 318
i 319
i 320
i 321
i 322
i 323
i 324
i 325
i 326
i 327
i 328
i 329
i 330
i 331
i 332
i 333
i 334
i 335
i 336
i 337
i 338
i 339
i 340
i 341
i 342
i 343
i 344
i 345
i 346
i 347
i 348
i 349
i 350
i 351
i 352
i 353
i 354
i 355
i 356
i 357
i 358
i 359
i 360
i 361
i 362
i 363
i 364
i 365
i 366
i 367
i 368
i 369
i 370
i 371
i 372
i 373
i 374
i 375
i 376
i 377
i 378
i 379
i 380
i 381
i 382
i 383
i 384
i 385
i 386
i 387
i 388
i 389
i 390
i 391
i 392
i 393
i 394
i 395
i 396
i 397
i 398
i 399
i 400
i 401
i 402
i 403
i 404
i 405
i 406
i 407
i 408
i 409
i 410
i 411
i 412
i 413
i 414
i 415
i 416
i 417
i 418
i 419
i 420
i 421
i 422
i 423
i 424
i 425
i 426
i 427
i 428
i 429
i 430
i 431
i 432
i 433
i 434
i 435
i 436
i 437
i 438
i 439
i 440
i 441
i 442
i 443
i 444
i 445
i 446
i 447
i 448
i 449
i 450
i 451
i 452
i 453
i 454
i 455
i 456
i 457
i 458
i 459
i 460
i 461
i 462
i 463
i 464
i 465
i 466
i 467
i 468
i 469
i 470
i 471
i 472
i 473
i 474
i 475
i 476
i 477
i 478
i 479
i 480
i 481
i 482
i 483
i 484
i 485
i 486
i 487
i 488
i 489
i 490
i 491
i 492
i 493
i 494
i 495
i 496
i 497
i 498
i 499
i 500
i 501
i 502
i 503
i 504
i 505
i 506
i 507
i 508
i 509
i 510
i 511
i 512
i 513
i 514
i 515
i 516
i 517
i 518
i 519
i 520
i 521
i 522
i 523
i 524
i 525
i 526
i 527
i 528
i 529
i 530
i 531
i 532
i 533
i 534
i 535
i 536
i 537
i 538
i 539
i 540
i 541
i 542
i 543
i 544
i 545
i 546
i 547
i 548
i 549
i 550
i 551
i 552
i 553
i 554
i 555
i 556
i 557
i 558
i 559
i 560
i 561
i 562
i 563
i 564
i 565
i 566
i 567
i 568
i 569
i 570
i 571
i 572
i 573
i 574
i 575
i 576
i 577
i 578
i 579
i 580
i 581
i 582
i 583
i 584
i 585
i 586
i 587
i 588
i 589
i 590
i 591
i 592
i 593
i 594
i 595
i 596
i 597
i 598
i 599
i 600
i 601
i 602
i 603
i 604
i 605
i 606
i 607
i 608
i 609
i 610
i 611
i 612
i 613
i 614
i 615
i 616
i 617
i 618
i 619
i 620
i 621
i 622
i 623
i 624
i 625
i 626
i 627
i 628
i 629
i 630
i 631
i 632
i 633
i 634
i 635
i 636
i 637
i 638
i 639
i 640
i 641
i 642
i 643
i 644
i 645
i 646
i 647
i 648
i 649
i 650
i 651
i 652
i 653
i 654
i 655
i 656
i 657
i 658
i 659
i 660
i 661
i 662
i 663
i 664
i 665
i 666
i 667
i 668
i 669
i 670
i 671
i 672
i 673
i 674
i 675
i 676
i 677
i 678
i 679
i 680
i 681
i 682
i 683
i 684
i 685
i 686
i 687
i 688
i 689
i 690
i 691
i 692
i 693
i 694
i 695
i 696
i 697
i 698
i 699
i 700
i 701
i 702
i 703
i 704
i 705
i 706
i 707
i 708
i 709
i 710
i 711
i 712
i 713
i 714
i 715
i 716
i 717
i 718
i 719
i 720
i 721
i 722
i 723
i 724
i 725
i 726
i 727
i 728
i 729
i 730
i 731
i 732
i 733
i 734
i 735
i 736
i 737
i 738
i 739
i 740
i 741
i 742
i 743
i 744
i 745
i 746
i 747
i 748
i 749
i 750
i 751
i 752
i 753
i 754
i 755
i 756
i 757
i 758
i 759
i 760
i 761
i 762
i 763
i 764
i 765
i 766
i 767
i 768
i 769
i 770
i 771
i 772
i 773
i 774
i 775
i 776
i 777
i 778
i 779
i 780
i 781
i 782
i 783
i 784
i 785
i 786
i 787
i 788
i 789
i 790
i 791
i 792
i 793
i 794
i 795
i 796
i 797
i 798
i 799
i 800
i 801
i 802
i 803
i 804
i 805
i 806
i 807
i 808
i 809
i 810
i 811
i 812
i 813
i 814
i 815
i 816
i 817
i 818
i 819
i 820
i 821
i 822
i 823
i 824
i 825
i 826
i 827
i 828
i 829
i 830
i 831
i 832
i 833
i 834
i 835
i 836
i 837
i 838
i 839
i 840
i 841
i 842
i 843
i 844
i 845
i 846
i 847
i 848
i 849
i 850
i 851
i 852
i 853
i 854
i 855
i 856
i 857
i 858
i 859
i 860
i 861
i 862
i 863
i 864
i 865
i 866
i 867
i 868
i 869
i 870
i 871
i 872
i 873
i 874
i 875
i 876
i 877
i 878
i 879
i 880
i 881
i 882
i 883
i 884
i 885
i 886
i 887
i 888
i 889
i 890
i 891
i 892
i 893
i 894
i 895
i 896
i 897
i 898
i 899
i 900
i 901
i 902
i 903
i 904
i 905
i 906
i 907
i 908
i 909
i 910
i 911
i 912
i 913
i 914
i 915
i 916
i 917
i 918
i 919
i 920
i 921
i 922
i 923
i 924
i 925
i 926
i 927
i 928
i 929
i 930
i 931
i 932
i 933
i 934
i 935
i 936
i 937
i 938
i 939
i 940
i 941
i 942
i 943
i 944
i 945
i 946
i 947
i 948
i 949
i 950
i 951
i 952
i 953
i 954
i 955
i 956
i 957
i 958
i 959
i 960
i 961
i 962
i 963
i 964
i 965
i 966
i 967
i 968
i 969
i 970
i 971
i 972
i 973
i 974
i 975
i 976
i 977
i 978
i 979
i 980
i 981
i 982
i 983
i 984
i 985
i 986
i 987
i 988
i 989
i 990
i 991
i 992
i 993
i 994
i 995
i 996
i 997
i 998
i 999
i 1000
i 1001
i 1002
i 1003
i 1004
i 1005
i 1006
i 1007
i 1008
i 1009
i 1010
i 1011
i 1012
i 1013
i 1014
i 1015
i 1016
i 1017
i 1018
i 1019
i 1020
i 1021
i 1022
i 1023
i 1024
i 1025
i 1026
i 1027
i 1028
i 1029
i 1030
i 1031
i 1032
i 1033
i 1034
i 1035
i 1036
i 1037
i 1038
i 1039
i 1040
i 1041
i 1042
i 1043
i 1044
i 1045
i 1046
i 1047
i 1048
i 1049
i 1050
i 1051
i 1052
i 1053
i 1054
i 1055
i 1056
i 1057
i 1058
i 1059
i 1060
i 1061
i 1062
i 1063
i 1064
i 1065
i 1066
i 1067
i 1068
i 1069
i 1070
i 1071
i 1072
i 1073
i 1074
i 1075
i 1076
i 1077
i 1078
i 1079
i 1080
i 1081
i 1082
i 1083
i 1084
i 1085
i 1086
i 1087
i 1088
i 1089
i 1090
i 1091
i 1092
i 1093
i 1094
i 1095
i 1096
i 1097
i 1098
i 1099
i 1100
i 1101
i 1102
i 1103
i 1104
i 1105
i 1106
i 1107
i 1108
i 1109
i 1110
i 1111
i 1112
i 1113
i 1114
i 1115
i 1116
i 1117
i 1118
i 1119
i 1120
i 1121
i 1122
i 1123
i 1124
i 1125
i 1126
i 1127
i 1128
i 1129
i 1130
i 1131
i 1132
i 1133
i 1134
i 1135
i 1136
i 1137
i 1138
i 1139
i 1140
i 1141
i 1142
i 1143
i 1144
i 1145
i 1146
i 1147
i 1148
i 1149
i 1150
i 1151
i 1152
i 1153
i 1154
i 1155
i 1156
i 1157
i 1158
i 1159
i 1160
i 1161
i 1162
i 1163
i 1164
i 1165
i 1166
i 1167
i 1168
i 1169
i 1170
i 1171
i 1172
i 1173
i 1174
i 1175
i 1176
i 1177
i 1178
i 1179
i 1180
i 1181
i 1182
i 1183
i 1184
i 1185
i 1186
i 1187
i 1188
i 1189
i 1190
i 1191
i 1192
i 1193
i 1194
i 1195
i 1196
i 1197
i 1198
i 1199
i 1200
i 1201
i 1202
i 1203
i 1204
i 1205
i 1206
i 1207
i 1208
i 1209
i 1210
i 1211
i 1212
i 1213
i 1214
i 1215
i 1216
i 1217
i 1218
i 1219
i 1220
i 1221
i 1222
i 1223
i 1224
i 1225
i 1226
i 1227
i 1228
i 1229
i 1230
i 1231
i 1232
i 1233
i 1234
i 1235
i 1236
i 1237
i 1238
i 1239
i 1240
i 1241
i 1242
i 1243
i 1244
i 1245
i 1246
i 1247
i 1248
i 1249
i 1250
i 1251
i 1252
i 1253
i 1254
i 1255
i 1256
i 1257
i 1258
i 1259
i 1260
i 1261
i 1262
i 1263
i 1264
i 1265
i 1266
i 1267
i 1268
i 1269
i 1270
i 1271
i 1272
i 1273
i 1274
i 1275
i 1276
i 1277
i 1278
i 1279
i 1280
i 1281
i 1282
i 1283
i 1284
i 1285
i 1286
i 1287
i 1288
i 1289
i 1290
i 1291
i 1292
i 1293
i 1294
i 1295
i 1296
i 1297
i 1298
i 1299
i 1300
i 1301
i 1302
i 1303
i 1304
i 1305
i 1306
i 1307
i 1308
i 1309
i 1310
i 1311
i 1312
i 1313
i 1314
i 1315
i 1316
i 1317
i 1318
i 1319
i 1320
i 1321
i 1322
i 1323
i 1324
i 1325
i 1326
i 1327
i 1328
i 1329
i 1330
i 1331
i 1332
i 1333</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2020-07-02-Animating-Velocity-Graph_files/figure-html/cell-12-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<section id="learning-how-matplotlib-plots" class="level3">
<h3 class="anchored" data-anchor-id="learning-how-matplotlib-plots">Learning How Matplotlib plots</h3>
<p>In the following cells, I experimented with the ranges for which data to be plotted. Once I figured out putting <code>start:end</code> into a dataframe, I used this for the first function</p>
<p>With an understanding of this property I was able to have the graph from <code>0</code> to the value at the specific frame.</p>
<div id="cell-25" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2020-06-14T21:46:34.647221Z&quot;,&quot;start_time&quot;:&quot;2020-06-14T21:46:34.530275Z&quot;}" data-execution_count="101">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co">#plt.scatter(x_df,y_df)</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>plt.plot(x_df[<span class="dv">0</span>:<span class="dv">100</span>], y_df[<span class="dv">0</span>:<span class="dv">100</span>])</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2020-07-02-Animating-Velocity-Graph_files/figure-html/cell-13-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="messing-with-labels" class="level3">
<h3 class="anchored" data-anchor-id="messing-with-labels">Messing with labels</h3>
<p>When I intially made the velocity and time printouts, I thought about using <code>AnchoredText</code> boxes and having each frame update the boxes. Using this method was not the best as it made the processing of the animation take longer and the text boxes would not overlap. Later I learned how to animate text.</p>
<p>Although not shown here, I later found <a href="https://brushingupscience.com/2016/06/21/matplotlib-animations-the-easy-way/"> a very helpful guide that demonstrated animating text and labels </a>. I did not know that I could incoorperate text changes in the <code>animate</code> fucntion with on matplotlib. I implemented most of the changes of <code>set_text()</code> and <code>ax.text()</code> in the <code>animateGraph()</code> section. It was easier to modify <code>animateGraph()</code> as I could run it to get a output and would not have the same code in 3 other places of the notebook.</p>
<p>Another goal of this section was to experiment with matplotlib to get the outputs to my liking. I learned <a href="https://stackoverflow.com/questions/332289/how-do-you-change-the-size-of-figures-drawn-with-matplotlib"> I could change the graph size with</a> <code>fig.set_size_inches()</code></p>
<div id="cell-27" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2020-06-20T07:04:08.850741Z&quot;,&quot;start_time&quot;:&quot;2020-06-20T07:04:08.483783Z&quot;}" data-execution_count="349">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> plt.figure()</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>fig.set_size_inches(<span class="fl">18.5</span>, <span class="fl">10.5</span>)</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>fig.savefig(<span class="st">'test2png.png'</span>, dpi<span class="op">=</span><span class="dv">100</span>)</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> plt.axes(xlim<span class="op">=</span>(<span class="dv">0</span>, x_max), ylim<span class="op">=</span>(<span class="dv">0</span>, y_max<span class="op">+</span><span class="dv">2</span>))</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>ax.<span class="bu">set</span>(title<span class="op">=</span><span class="st">'Velocity vs Time'</span>,</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>           ylabel<span class="op">=</span><span class="st">"Velocity"</span>,</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>           xlabel<span class="op">=</span><span class="st">"Time (ms)"</span>)</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>at1 <span class="op">=</span> AnchoredText(x_df[<span class="dv">100</span>],</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>    prop<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">15</span>), frameon<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>    loc<span class="op">=</span><span class="st">'upper left'</span>,</span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>at.patch.set_boxstyle(<span class="st">"round,pad=0.3,rounding_size=0.5"</span>)</span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>ax.add_artist(at1)</span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>at2 <span class="op">=</span> AnchoredText(y_df[<span class="dv">100</span>],</span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>    prop<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">15</span>), frameon<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>    loc<span class="op">=</span><span class="st">'upper right'</span>,</span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a>at2.patch.set_boxstyle(<span class="st">"round,pad=0.3,rounding_size=0.2"</span>)</span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a>ax.add_artist(at2)</span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a>at3 <span class="op">=</span> AnchoredText(<span class="fl">1.3</span>,</span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a>    prop<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">15</span>), frameon<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a>    loc<span class="op">=</span><span class="st">'upper right'</span>,</span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a>at3.patch.set_boxstyle(<span class="st">"round,pad=0.3,rounding_size=0.2"</span>)</span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a>ax.add_artist(at3)</span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-31"><a href="#cb29-31" aria-hidden="true" tabindex="-1"></a>plt.plot(x_df[<span class="dv">0</span>:<span class="dv">100</span>], y_df[<span class="dv">0</span>:<span class="dv">100</span>])</span>
<span id="cb29-32"><a href="#cb29-32" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2020-07-02-Animating-Velocity-Graph_files/figure-html/cell-14-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="print-statements" class="level3">
<h3 class="anchored" data-anchor-id="print-statements">print statements</h3>
<p>I used these print statements to figure out why my maxes were not being rounded to the nearest whole number.</p>
<p>Initially, I tried using <code>round( #number, #decimal places)</code>, <a href="https://stackoverflow.com/questions/31818050/round-number-to-nearest-integer">from Stackoverflow</a> but the native function concatenated for values such as <code>20.5</code> to <code>20</code> instead of <code>21</code></p>
<p>Eventually I found a detailed explanation behind the native python <code>round()</code> function <a href="https://realpython.com/python-rounding/">from RealPython</a>, in addition to suggested alternative functions and libraries I could use that would solve the issue I was running into. The suggestion was to use <code>ceil</code> from the <code>math</code> libraries. I ended up using <code>ceil</code> from the <code>numpy</code> libraries since I didn’t want to import another library</p>
<div id="cell-29" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2020-06-15T22:27:27.164297Z&quot;,&quot;start_time&quot;:&quot;2020-06-15T22:26:42.557Z&quot;}">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"y_max:"</span>, df[<span class="st">"Time (ms)"</span>].<span class="bu">max</span>())</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>()</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"y_max ceil rounding:"</span>, np.ceil(df[<span class="st">"Time (ms)"</span>].<span class="bu">max</span>()))</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>()</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"x_max:"</span>, df[<span class="st">"Velocity"</span>].<span class="bu">max</span>())</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>()</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"x_max ceil rounding:"</span>, np.ceil(df[<span class="st">"Velocity"</span>].<span class="bu">max</span>()))</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>()</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"issue rounded y_max (Time):"</span>, <span class="bu">int</span>(<span class="bu">round</span>(df[<span class="st">"Time (ms)"</span>].<span class="bu">max</span>(),<span class="dv">1</span>)))</span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>()</span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"issue rounded x_max (Velocity):"</span>, <span class="bu">int</span>(<span class="bu">round</span>(df[<span class="st">"Velocity"</span>].<span class="bu">max</span>(),<span class="dv">1</span>)))</span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="having-a-dot-tracking-along-the-velocity-curve" class="level2">
<h2 class="anchored" data-anchor-id="having-a-dot-tracking-along-the-velocity-curve">Having a Dot Tracking Along the Velocity Curve</h2>
<p>After making my modifications, I copied my modified version and further adjusted it further titled <code>Having a Dot Tracking Along the Velocity Curve</code> to print the plot first and have a single point track along the plotted graph</p>
<p>Changes from the original <code>Having Line Plotted Through time</code> * added red dot for tracking instead of line * used following additional arguments to set the dot <code>linestyle='none', marker = 'o', ms = 10, color='r'</code>, I learned of these parameters from adrian prince-whelan’s demonstration of <a href="https://adrian.pw/blog/matplotlib-transparent-animation/">Making a Matplotlib animation with a transparent background</a> * <code>linestyle='none'</code> prevents lines from being drawn * <code>marker = 'o'</code> sets the dot * <code>ms = 10</code> sets the dot size * <code>color='r'</code> sets the dot color * messing with video transparency as well from the same post * main issue right now is getting the correct save settings * changed x <code>linspace</code> value to have the previous frame * added conditional where at <code>i=0</code>, <code>i</code> would start at <code>0</code> instead of <code>-1</code> when calling the <code>x_df[i-1]</code> and <code>x_df[i]</code> dataframe entry</p>
<div id="cell-31" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2020-06-28T09:09:41.657665Z&quot;,&quot;start_time&quot;:&quot;2020-06-28T09:08:46.317941Z&quot;}" data-execution_count="7">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>x_df <span class="op">=</span> df[<span class="st">"Time (ms)"</span>]</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>y_df <span class="op">=</span> df[<span class="st">"Velocity (m/s)"</span>]</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>x_max <span class="op">=</span> <span class="bu">int</span>(np.ceil(df[<span class="st">"Time (ms)"</span>].<span class="bu">max</span>()))</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>y_max <span class="op">=</span> <span class="bu">int</span>(np.ceil(df[<span class="st">"Velocity (m/s)"</span>].<span class="bu">max</span>()))</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>time_seconds <span class="op">=</span> x_df.iloc[<span class="op">-</span><span class="dv">1</span>]<span class="op">/</span><span class="dv">1000</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>framerate <span class="op">=</span> <span class="dv">60</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>totalFrames <span class="op">=</span> <span class="bu">len</span>(df)</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a><span class="co"># First set up the figure, the axis, and the plot element we want to animate</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> plt.figure()</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>fig.set_size_inches(<span class="fl">18.5</span>, <span class="fl">10.5</span>)</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>fig.savefig(<span class="st">'test2png.png'</span>, dpi<span class="op">=</span><span class="dv">100</span>)</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a><span class="co"># transparency settings for the figure</span></span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a><span class="co">#fig.patch.set_alpha(0.)</span></span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> plt.axes(xlim<span class="op">=</span>(<span class="dv">0</span>, x_max), ylim<span class="op">=</span>(<span class="dv">0</span>, y_max))</span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a>ax.<span class="bu">set</span>(title<span class="op">=</span><span class="st">'Velocity vs Time'</span>,</span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a>           ylabel<span class="op">=</span><span class="st">"Velocity"</span>,</span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a>           xlabel<span class="op">=</span><span class="st">"Time (ms)"</span>)</span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a><span class="co"># transparency settings for the plot area</span></span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a><span class="co">#ax.patch.set_facecolor('#ababab')</span></span>
<span id="cb31-25"><a href="#cb31-25" aria-hidden="true" tabindex="-1"></a><span class="co">#ax.patch.set_alpha(0)</span></span>
<span id="cb31-26"><a href="#cb31-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-27"><a href="#cb31-27" aria-hidden="true" tabindex="-1"></a>plt.plot(x_df, y_df)</span>
<span id="cb31-28"><a href="#cb31-28" aria-hidden="true" tabindex="-1"></a>line, <span class="op">=</span> plt.plot([], [], linestyle<span class="op">=</span><span class="st">'none'</span>, marker <span class="op">=</span> <span class="st">'o'</span>, ms <span class="op">=</span> <span class="dv">10</span>, color<span class="op">=</span><span class="st">'r'</span>)</span>
<span id="cb31-29"><a href="#cb31-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-30"><a href="#cb31-30" aria-hidden="true" tabindex="-1"></a><span class="co"># initialization function: plot the background of each frame</span></span>
<span id="cb31-31"><a href="#cb31-31" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> init():</span>
<span id="cb31-32"><a href="#cb31-32" aria-hidden="true" tabindex="-1"></a>    line.set_data([], [])</span>
<span id="cb31-33"><a href="#cb31-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> line,</span>
<span id="cb31-34"><a href="#cb31-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-35"><a href="#cb31-35" aria-hidden="true" tabindex="-1"></a><span class="co"># animation function.  This is called sequentially</span></span>
<span id="cb31-36"><a href="#cb31-36" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> animate(i):</span>
<span id="cb31-37"><a href="#cb31-37" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> x_df[i]</span>
<span id="cb31-38"><a href="#cb31-38" aria-hidden="true" tabindex="-1"></a>    <span class="co">#print("x")</span></span>
<span id="cb31-39"><a href="#cb31-39" aria-hidden="true" tabindex="-1"></a>    <span class="co">#print(x)</span></span>
<span id="cb31-40"><a href="#cb31-40" aria-hidden="true" tabindex="-1"></a>    y <span class="op">=</span> y_df[i]</span>
<span id="cb31-41"><a href="#cb31-41" aria-hidden="true" tabindex="-1"></a>    line.set_data(x, y)</span>
<span id="cb31-42"><a href="#cb31-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> line,</span>
<span id="cb31-43"><a href="#cb31-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-44"><a href="#cb31-44" aria-hidden="true" tabindex="-1"></a><span class="co"># call the animator.  blit=True means only re-draw the parts that have changed.</span></span>
<span id="cb31-45"><a href="#cb31-45" aria-hidden="true" tabindex="-1"></a>anim <span class="op">=</span> animation.FuncAnimation(fig, animate, init_func<span class="op">=</span>init,frames <span class="op">=</span> totalFrames, interval<span class="op">=</span><span class="dv">0</span>, blit<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb31-46"><a href="#cb31-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-47"><a href="#cb31-47" aria-hidden="true" tabindex="-1"></a><span class="co"># save the animation as an mp4.  This requires ffmpeg or mencoder to be</span></span>
<span id="cb31-48"><a href="#cb31-48" aria-hidden="true" tabindex="-1"></a><span class="co"># installed.  The extra_args ensure that the x264 codec is used, so that</span></span>
<span id="cb31-49"><a href="#cb31-49" aria-hidden="true" tabindex="-1"></a><span class="co"># the video can be embedded in html5.  You may need to adjust this for</span></span>
<span id="cb31-50"><a href="#cb31-50" aria-hidden="true" tabindex="-1"></a><span class="co"># your system: for more information, see</span></span>
<span id="cb31-51"><a href="#cb31-51" aria-hidden="true" tabindex="-1"></a><span class="co"># http://matplotlib.sourceforge.net/api/animation_api.html</span></span>
<span id="cb31-52"><a href="#cb31-52" aria-hidden="true" tabindex="-1"></a>anim.save(<span class="st">'dot_tracking_animation_test.mp4'</span>, fps<span class="op">=</span>framerate, extra_args<span class="op">=</span>[<span class="st">'-vcodec'</span>, <span class="st">'libx264'</span>])</span>
<span id="cb31-53"><a href="#cb31-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-54"><a href="#cb31-54" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2020-07-02-Animating-Velocity-Graph_files/figure-html/cell-16-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="figuring-out-keyerror" class="level2">
<h2 class="anchored" data-anchor-id="figuring-out-keyerror">Figuring out <code>Keyerror</code></h2>
<p>While running <code>Dot Tracking Along the Velocity Curve</code> I got a consistent <code>keyerror</code> when plotting i. The following code blocks helped me debug the values of i for each iteration.</p>
<p>I later realized that the <code>keyerror</code> was caused by my totalFrames calculation, which took the last value of the data (milliseconds converted to seconds), multiplied it by the framerate, and was rounded to get total number of frames. Before changing to use the length of the dataframe, the <code>totalFrames</code> was <code>1333.98</code>, which was rounded to 1334. The <code>keyerror</code> occured because <code>animate(i)</code> uses the <code>frames</code> variable as a index. Once animate reached the length of the dataframe (<code>1319</code>) the animation stopped, but in the <code>animation.FuncAnimation()</code> function continued to pass values in for <code>i</code>. When computing for <code>x</code>, this caused a <code>keyerror</code> since <code>animation.FuncAnimation()</code> would continue to feed values in for <code>i</code>, but in the dataframe no such values existed.</p>
<p>To prevent this from happening, I added a conditional that when we reached the end of the dataframe, we would use the last value of the dataframe.</p>
<div id="cell-33" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2020-06-28T09:10:19.147598Z&quot;,&quot;start_time&quot;:&quot;2020-06-28T09:10:19.078100Z&quot;}" data-scrolled="true" data-execution_count="9">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>x_df <span class="op">=</span> df[<span class="st">"Time (ms)"</span>]</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>y_df <span class="op">=</span> df[<span class="st">"Velocity (m/s)"</span>]</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> x_df:</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> x_df[i]</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">#print("i = ",i,",", "a = ",a)</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>    y <span class="op">=</span> y_df[i]</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"i = "</span>, i, <span class="st">"x = "</span>, x, <span class="st">","</span>, <span class="st">"y = "</span>,y)</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>i =  0 x =  0 , y =  0.03

i =  17 x =  284 , y =  0.03

i =  34 x =  567 , y =  2.67

i =  50 x =  834 , y =  1.3

i =  67 x =  1134 , y =  10.33

i =  84 x =  1467 , y =  19.06

i =  100 x =  1734 , y =  20.01

i =  117 x =  2017 , y =  20.01

i =  134 x =  2300 , y =  6.73

i =  150 x =  2567 , y =  1.14

i =  167 x =  2850 , y =  0.0

i =  184 x =  3134 , y =  0.0

i =  200 x =  3400 , y =  0.0

i =  217 x =  3684 , y =  0.0

i =  234 x =  3967 , y =  4.01

i =  250 x =  4234 , y =  10.0

i =  267 x =  4517 , y =  3.24

i =  284 x =  4800 , y =  6.94

i =  300 x =  5067 , y =  4.32

i =  317 x =  5400 , y =  6.66

i =  334 x =  5684 , y =  3.74

i =  350 x =  5950 , y =  5.6

i =  367 x =  6234 , y =  4.38

i =  384 x =  6517 , y =  10.64

i =  400 x =  6784 , y =  15.76

i =  417 x =  7067 , y =  20.07

i =  434 x =  7350 , y =  20.09

i =  450 x =  7617 , y =  0.45

i =  467 x =  7900 , y =  4.64

i =  484 x =  8184 , y =  10.0

i =  500 x =  8450 , y =  10.0

i =  517 x =  8733 , y =  10.0

i =  534 x =  9017 , y =  10.0

i =  550 x =  9283 , y =  6.32

i =  567 x =  9567 , y =  8.59

i =  584 x =  9850 , y =  2.56

i =  600 x =  10117 , y =  3.77

i =  617 x =  10400 , y =  15.77

i =  634 x =  10683 , y =  20.17

i =  650 x =  10950 , y =  20.5

i =  667 x =  11233 , y =  15.99

i =  684 x =  11517 , y =  13.51

i =  700 x =  11783 , y =  10.74

i =  717 x =  12067 , y =  8.74

i =  734 x =  12350 , y =  5.64

i =  750 x =  12617 , y =  8.87

i =  767 x =  12900 , y =  13.08

i =  784 x =  13184 , y =  2.68

i =  800 x =  13450 , y =  0.01

i =  817 x =  13734 , y =  2.56

i =  834 x =  14017 , y =  10.0

i =  850 x =  14284 , y =  10.01

i =  867 x =  14567 , y =  10.0

i =  884 x =  14850 , y =  10.0

i =  900 x =  15117 , y =  10.01

i =  917 x =  15400 , y =  10.0

i =  934 x =  15684 , y =  10.0

i =  967 x =  16234 , y =  10.0

i =  984 x =  16517 , y =  10.02

i =  1000 x =  16784 , y =  13.24

i =  1017 x =  17117 , y =  20.0

i =  1034 x =  17400 , y =  18.88

i =  1050 x =  17667 , y =  18.0

i =  1067 x =  17950 , y =  18.0

i =  1084 x =  18234 , y =  18.01

i =  1100 x =  18500 , y =  18.28

i =  1117 x =  18784 , y =  18.09

i =  1134 x =  19067 , y =  17.36

i =  1150 x =  19334 , y =  17.2

i =  1167 x =  19717 , y =  17.59

i =  1184 x =  20000 , y =  15.97

i =  1200 x =  20267 , y =  15.02

i =  1217 x =  20550 , y =  15.48

i =  1234 x =  20833 , y =  15.09

i =  1250 x =  21100 , y =  15.05

i =  1267 x =  21383 , y =  3.15

i =  1284 x =  21667 , y =  8.25

i =  1300 x =  21933 , y =  5.85

i =  1317 x =  22217 , y =  0.41
</code></pre>
</div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">KeyError</span>                                  Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-9-9d1447f8ceb4&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg ansi-bold">      3</span> 
<span class="ansi-green-fg ansi-bold">      4</span> <span class="ansi-green-fg">for</span> i <span class="ansi-green-fg">in</span> x_df<span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">----&gt; 5</span><span class="ansi-red-fg">     </span>x <span class="ansi-blue-fg">=</span> x_df<span class="ansi-blue-fg">[</span>i<span class="ansi-blue-fg">]</span>
<span class="ansi-green-fg ansi-bold">      6</span>     <span class="ansi-red-fg">#print("i = ",i,",", "a = ",a)</span>
<span class="ansi-green-fg ansi-bold">      7</span>     y <span class="ansi-blue-fg">=</span> y_df<span class="ansi-blue-fg">[</span>i<span class="ansi-blue-fg">]</span>

<span class="ansi-green-fg">~/miniconda3/lib/python3.7/site-packages/pandas/core/series.py</span> in <span class="ansi-cyan-fg">__getitem__</span><span class="ansi-blue-fg">(self, key)</span>
<span class="ansi-green-fg ansi-bold">   1069</span>         key <span class="ansi-blue-fg">=</span> com<span class="ansi-blue-fg">.</span>apply_if_callable<span class="ansi-blue-fg">(</span>key<span class="ansi-blue-fg">,</span> self<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg ansi-bold">   1070</span>         <span class="ansi-green-fg">try</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">-&gt; 1071</span><span class="ansi-red-fg">             </span>result <span class="ansi-blue-fg">=</span> self<span class="ansi-blue-fg">.</span>index<span class="ansi-blue-fg">.</span>get_value<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> key<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg ansi-bold">   1072</span> 
<span class="ansi-green-fg ansi-bold">   1073</span>             <span class="ansi-green-fg">if</span> <span class="ansi-green-fg">not</span> is_scalar<span class="ansi-blue-fg">(</span>result<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>

<span class="ansi-green-fg">~/miniconda3/lib/python3.7/site-packages/pandas/core/indexes/base.py</span> in <span class="ansi-cyan-fg">get_value</span><span class="ansi-blue-fg">(self, series, key)</span>
<span class="ansi-green-fg ansi-bold">   4728</span>         k <span class="ansi-blue-fg">=</span> self<span class="ansi-blue-fg">.</span>_convert_scalar_indexer<span class="ansi-blue-fg">(</span>k<span class="ansi-blue-fg">,</span> kind<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">"getitem"</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg ansi-bold">   4729</span>         <span class="ansi-green-fg">try</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">-&gt; 4730</span><span class="ansi-red-fg">             </span><span class="ansi-green-fg">return</span> self<span class="ansi-blue-fg">.</span>_engine<span class="ansi-blue-fg">.</span>get_value<span class="ansi-blue-fg">(</span>s<span class="ansi-blue-fg">,</span> k<span class="ansi-blue-fg">,</span> tz<span class="ansi-blue-fg">=</span>getattr<span class="ansi-blue-fg">(</span>series<span class="ansi-blue-fg">.</span>dtype<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">"tz"</span><span class="ansi-blue-fg">,</span> <span class="ansi-green-fg">None</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg ansi-bold">   4731</span>         <span class="ansi-green-fg">except</span> KeyError <span class="ansi-green-fg">as</span> e1<span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg ansi-bold">   4732</span>             <span class="ansi-green-fg">if</span> len<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">)</span> <span class="ansi-blue-fg">&gt;</span> <span class="ansi-cyan-fg">0</span> <span class="ansi-green-fg">and</span> <span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">.</span>holds_integer<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">or</span> self<span class="ansi-blue-fg">.</span>is_boolean<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>

<span class="ansi-green-fg">pandas/_libs/index.pyx</span> in <span class="ansi-cyan-fg">pandas._libs.index.IndexEngine.get_value</span><span class="ansi-blue-fg">()</span>

<span class="ansi-green-fg">pandas/_libs/index.pyx</span> in <span class="ansi-cyan-fg">pandas._libs.index.IndexEngine.get_value</span><span class="ansi-blue-fg">()</span>

<span class="ansi-green-fg">pandas/_libs/index.pyx</span> in <span class="ansi-cyan-fg">pandas._libs.index.IndexEngine.get_loc</span><span class="ansi-blue-fg">()</span>

<span class="ansi-green-fg">pandas/_libs/hashtable_class_helper.pxi</span> in <span class="ansi-cyan-fg">pandas._libs.hashtable.Int64HashTable.get_item</span><span class="ansi-blue-fg">()</span>

<span class="ansi-green-fg">pandas/_libs/hashtable_class_helper.pxi</span> in <span class="ansi-cyan-fg">pandas._libs.hashtable.Int64HashTable.get_item</span><span class="ansi-blue-fg">()</span>

<span class="ansi-red-fg">KeyError</span>: 1334</pre>
</div>
</div>
</div>
<div id="cell-34" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2020-06-19T21:15:19.590976Z&quot;,&quot;start_time&quot;:&quot;2020-06-19T21:15:19.585231Z&quot;}" data-execution_count="58">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>df.iloc[<span class="dv">1318</span>]</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="co">#len(df)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="58">
<pre><code>Time (ms)    22233.00
Velocity         0.41
Name: 1318, dtype: float64</code></pre>
</div>
</div>
<div id="cell-35" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2020-06-28T09:09:41.701179Z&quot;,&quot;start_time&quot;:&quot;2020-06-28T09:09:03.098Z&quot;}">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>display(x_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-36" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2020-06-19T21:57:22.503624Z&quot;,&quot;start_time&quot;:&quot;2020-06-19T21:57:22.498931Z&quot;}" data-execution_count="103">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>display(framerate <span class="op">*</span> time_seconds)</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>totalFrames</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>1333.98</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="103">
<pre><code>1334</code></pre>
</div>
</div>
</section>
</section>
<section id="messing-with-a-overlapping-graph" class="level1">
<h1>Messing with a overlapping graph</h1>
<p>while looking for solutions to animate the velocity and time outputs, I stumbled upon a method to use subplots. If I come back to this project, I would want to make a line tracing option, where a line plot is generated, and another plot will overlap</p>
<div id="cell-38" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2020-06-28T09:09:41.703099Z&quot;,&quot;start_time&quot;:&quot;2020-06-28T09:09:06.675Z&quot;}">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> plt.figure()</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>fig.set_size_inches(<span class="fl">18.5</span>, <span class="fl">10.5</span>)</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>fig.savefig(<span class="st">'test2png.png'</span>, dpi<span class="op">=</span><span class="dv">100</span>)</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>ax.plot(x_df, y_df)</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>plt.plot(x_df[<span class="dv">0</span>:<span class="dv">100</span>], y_df[<span class="dv">0</span>:<span class="dv">100</span>])</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-39" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2020-06-27T19:18:24.011391Z&quot;,&quot;start_time&quot;:&quot;2020-06-27T19:18:23.051573Z&quot;}" data-execution_count="2">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>jupyter nbconvert  Animating<span class="op">-</span>Velocity<span class="op">-</span>Graph.ipynb <span class="op">--</span>to html</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[NbConvertApp] Converting notebook Animating-Velocity-Graph.ipynb to html
[NbConvertApp] Writing 812059 bytes to Animating-Velocity-Graph.html</code></pre>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>